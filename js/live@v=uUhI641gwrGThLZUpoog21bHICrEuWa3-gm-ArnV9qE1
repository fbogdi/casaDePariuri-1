(function(n){var t,i=n();n.fn.sortable=function(r){var u=String(r);return r=n.extend({connectWith:!1},r),this.each(function(){var o,s,e,f;if(/^enable|disable|destroy$/.test(u)){e=n(this).children(n(this).data("items")).attr("draggable",u=="enable");u=="destroy"&&e.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}e=n(this).children(r.items);f=n("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');e.find(r.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1});n(this).data("items",r.items);i=i.add(f);r.connectWith&&n(r.connectWith).add(this).data("connectWith",r.connectWith);e.attr("draggable","true").on("dragstart.h5s",function(i){if(r.handle&&!o)return!1;o=!1;var u=i.originalEvent.dataTransfer;u.effectAllowed="move";u.setData("Text","dummy");s=(t=n(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){t&&(t.removeClass("sortable-dragging").show(),i.detach(),s!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,f]).on("dragover.h5s dragenter.h5s drop.h5s",function(u){return!e.is(t)&&r.connectWith!==n(t).parent().data("connectWith")?!0:u.type=="drop"?(u.stopPropagation(),i.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(u.preventDefault(),u.originalEvent.dataTransfer.dropEffect="move",e.is(this)?(r.forcePlaceholderSize&&f.height(t.outerHeight()),t.hide(),n(this)[f.index()<n(this).index()?"after":"before"](f),i.not(f).detach()):i.is(this)||n(this).children(r.items).length||(i.detach(),n(this).append(f)),!1)})})}})(jQuery),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof module!="undefined"&&module.exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){"use strict";function r(t){return!t.nodeName||n.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}function i(t){return n.isFunction(t)||n.isPlainObject(t)?t:{top:t,left:t}}var t=n.scrollTo=function(t,i,r){return n(window).scrollTo(t,i,r)};return t.defaults={axis:"xy",duration:0,limit:!0},n.fn.scrollTo=function(u,f,e){typeof f=="object"&&(e=f,f=0);typeof e=="function"&&(e={onAfter:e});u==="max"&&(u=9e9);e=n.extend({},t.defaults,e);f=f||e.duration;var o=e.queue&&e.axis.length>1;return o&&(f/=2),e.offset=i(e.offset),e.over=i(e.over),this.each(function(){function p(t){var i=n.extend({},e,{queue:!0,duration:f,complete:t&&function(){t.call(c,s,e)}});a.animate(h,i)}var y;if(u!==null){var l=r(this),c=l?this.contentWindow||window:this,a=n(c),s=u,h={},v;switch(typeof s){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(s)){s=i(s);break}s=l?n(s):n(s,c);case"object":if(s.length===0)return;(s.is||s.style)&&(v=(s=n(s)).offset())}y=n.isFunction(e.offset)&&e.offset(c,s)||e.offset;n.each(e.axis.split(""),function(n,i){var w=i==="x"?"Left":"Top",u=w.toLowerCase(),r="scroll"+w,b=a[r](),k=t.max(c,i),f;v?(h[r]=v[u]+(l?0:b-a.offset()[u]),e.margin&&(h[r]-=parseInt(s.css("margin"+w),10)||0,h[r]-=parseInt(s.css("border"+w+"Width"),10)||0),h[r]+=y[u]||0,e.over[u]&&(h[r]+=s[i==="x"?"width":"height"]()*e.over[u])):(f=s[u],h[r]=f.slice&&f.slice(-1)==="%"?parseFloat(f)/100*k:f);e.limit&&/^\d+$/.test(h[r])&&(h[r]=h[r]<=0?0:Math.min(h[r],k));!n&&e.axis.length>1&&(b===h[r]?h={}:o&&(p(e.onAfterFirst),h={}))});p(e.onAfter)}})},t.max=function(t,i){var u=i==="x"?"Width":"Height",f="scroll"+u;if(!r(t))return t[f]-n(t)[u.toLowerCase()]();var e="client"+u,o=t.ownerDocument||t.document,s=o.documentElement,h=o.body;return Math.max(s[f],h[f])-Math.min(s[e],h[e])},n.Tween.propHooks.scrollLeft=n.Tween.propHooks.scrollTop={get:function(t){return n(t.elem)[t.prop]()},set:function(t){var r=this.get(t),i;if(t.options.interrupt&&t._last&&t._last!==r)return n(t.elem).stop();i=Math.round(t.now);r!==i&&(n(t.elem)[t.prop](i),t._last=this.get(t))}},t}),function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?n(require("jquery")):n(jQuery)}(function(n){"use strict";function t(n){return"string"==typeof n?parseInt(n,10):~~n}var i={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},r=0,u=function(){var n=r++;return function(t){var i=".perfect-scrollbar-"+n;return t===void 0?i:t+i}},f="WebkitAppearance"in document.documentElement.style;n.fn.perfectScrollbar=function(r,e){return this.each(function(){function dt(n,i){var r=n+i,u=l-w,f;nt=0>r?0:r>u?u:r;f=t(nt*(b-l)/(l-w));o.scrollTop(f)}function gt(n,i){var r=n+i,u=c-p,f;g=0>r?0:r>u?u:r;f=t(g*(a-c)/(c-p));o.scrollLeft(f)}function vt(n){return h.minScrollbarLength&&(n=Math.max(n,h.minScrollbarLength)),h.maxScrollbarLength&&(n=Math.min(n,h.maxScrollbarLength)),n}function ni(){var n={width:ut},t;n.left=st?o.scrollLeft()+c-a:o.scrollLeft();ct?n.bottom=ht-o.scrollTop():n.top=wt+o.scrollTop();v.css(n);t={top:o.scrollTop(),height:ft};lt?t.right=st?a-o.scrollLeft()-ot-tt.outerWidth():ot-o.scrollLeft():t.left=st?o.scrollLeft()+2*c-a-at-tt.outerWidth():at+o.scrollLeft();y.css(t);et.css({left:g,width:p-ai});tt.css({top:nt,height:w-yi})}function d(){o.removeClass("ps-active-x");o.removeClass("ps-active-y");c=h.includePadding?o.innerWidth():o.width();l=h.includePadding?o.innerHeight():o.height();a=o.prop("scrollWidth");b=o.prop("scrollHeight");!h.suppressScrollX&&a>c+h.scrollXMarginOffset?(it=!0,ut=c-vi,p=vt(t(ut*c/a)),g=t(o.scrollLeft()*(ut-p)/(a-c))):(it=!1,p=0,g=0,o.scrollLeft(0));!h.suppressScrollY&&b>l+h.scrollYMarginOffset?(rt=!0,ft=l-pi,w=vt(t(ft*l/b)),nt=t(o.scrollTop()*(ft-w)/(b-l))):(rt=!1,w=0,nt=0,o.scrollTop(0));g>=ut-p&&(g=ut-p);nt>=ft-w&&(nt=ft-w);ni();it&&o.addClass("ps-active-x");rt&&o.addClass("ps-active-y")}function ti(){var t,i,r=function(n){gt(t,n.pageX-i);d();n.stopPropagation();n.preventDefault()},u=function(){o.removeClass("ps-in-scrolling");n(k).unbind(s("mousemove"),r)};et.bind(s("mousedown"),function(f){i=f.pageX;t=et.position().left;o.addClass("ps-in-scrolling");n(k).bind(s("mousemove"),r);n(k).one(s("mouseup"),u);f.stopPropagation();f.preventDefault()});t=i=null}function ii(){var t,i,r=function(n){dt(t,n.pageY-i);d();n.stopPropagation();n.preventDefault()},u=function(){o.removeClass("ps-in-scrolling");n(k).unbind(s("mousemove"),r)};tt.bind(s("mousedown"),function(f){i=f.pageY;t=tt.position().top;o.addClass("ps-in-scrolling");n(k).bind(s("mousemove"),r);n(k).one(s("mouseup"),u);f.stopPropagation();f.preventDefault()});t=i=null}function yt(n,t){var r=o.scrollTop(),i;if(0===n){if(!rt)return!1;if(0===r&&t>0||r>=b-l&&0>t)return!h.wheelPropagation}if(i=o.scrollLeft(),0===t){if(!it)return!1;if(0===i&&0>n||i>=a-c&&n>0)return!h.wheelPropagation}return!0}function ri(n,t){var i=o.scrollTop(),r=o.scrollLeft(),u=Math.abs(n),f=Math.abs(t);if(f>u){if(0>t&&i===b-l||t>0&&0===i)return!h.swipePropagation}else if(u>f&&(0>n&&r===a-c||n>0&&0===r))return!h.swipePropagation;return!0}function ui(){function i(n){var t=n.originalEvent.deltaX,i=-1*n.originalEvent.deltaY;return(t===void 0||i===void 0)&&(t=n.originalEvent.wheelDeltaX/-6,i=n.originalEvent.wheelDeltaY/6),n.originalEvent.deltaMode&&1===n.originalEvent.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=n.originalEvent.wheelDelta),[t,i]}function t(t){if(f||!(o.find("select:focus").length>0)){var e=i(t),r=e[0],u=e[1];n=!1;h.useBothWheelAxes?rt&&!it?(u?o.scrollTop(o.scrollTop()-u*h.wheelSpeed):o.scrollTop(o.scrollTop()+r*h.wheelSpeed),n=!0):it&&!rt&&(r?o.scrollLeft(o.scrollLeft()+r*h.wheelSpeed):o.scrollLeft(o.scrollLeft()-u*h.wheelSpeed),n=!0):(o.scrollTop(o.scrollTop()-u*h.wheelSpeed),o.scrollLeft(o.scrollLeft()+r*h.wheelSpeed));d();n=n||yt(r,u);n&&(t.stopPropagation(),t.preventDefault())}}var n=!1;window.onwheel!==void 0?o.bind(s("wheel"),t):window.onmousewheel!==void 0&&o.bind(s("mousewheel"),t)}function fi(){var t=!1,i;o.bind(s("mouseenter"),function(){t=!0});o.bind(s("mouseleave"),function(){t=!1});i=!1;n(k).bind(s("keydown"),function(r){var f,e,u;if((!r.isDefaultPrevented||!r.isDefaultPrevented())&&t){if(f=document.activeElement?document.activeElement:k.activeElement,f){for(;f.shadowRoot;)f=f.shadowRoot.activeElement;if(n(f).is(":input,[contenteditable]"))return}e=0;u=0;switch(r.which){case 37:e=-30;break;case 38:u=30;break;case 39:e=30;break;case 40:u=-30;break;case 33:u=90;break;case 32:case 34:u=-90;break;case 35:u=r.ctrlKey?-b:-l;break;case 36:u=r.ctrlKey?o.scrollTop():l;break;default:return}o.scrollTop(o.scrollTop()-u);o.scrollLeft(o.scrollLeft()+e);i=yt(e,u);i&&r.preventDefault()}})}function ei(){function n(n){n.stopPropagation()}tt.bind(s("click"),n);y.bind(s("click"),function(n){var r=t(w/2),u=n.pageY-y.offset().top-r,f=l-w,i=u/f;0>i?i=0:i>1&&(i=1);o.scrollTop((b-l)*i)});et.bind(s("click"),n);v.bind(s("click"),function(n){var r=t(p/2),u=n.pageX-v.offset().left-r,f=c-p,i=u/f;0>i?i=0:i>1&&(i=1);o.scrollLeft((a-c)*i)})}function oi(){function f(){var n=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0};return 0===n.rangeCount?null:n.getRangeAt(0).commonAncestorContainer}function e(){i||(i=setInterval(function(){return pt()?(o.scrollTop(o.scrollTop()+t.top),o.scrollLeft(o.scrollLeft()+t.left),d(),void 0):(clearInterval(i),void 0)},50))}function u(){i&&(clearInterval(i),i=null);o.removeClass("ps-in-scrolling");o.removeClass("ps-in-scrolling")}var i=null,t={top:0,left:0},r=!1;n(k).bind(s("selectionchange"),function(){n.contains(o[0],f())?r=!0:(r=!1,u())});n(window).bind(s("mouseup"),function(){r&&(r=!1,u())});n(window).bind(s("mousemove"),function(n){if(r){var i={x:n.pageX,y:n.pageY},s=o.offset(),f={left:s.left,right:s.left+o.outerWidth(),top:s.top,bottom:s.top+o.outerHeight()};i.x<f.left+3?(t.left=-5,o.addClass("ps-in-scrolling")):i.x>f.right-3?(t.left=5,o.addClass("ps-in-scrolling")):t.left=0;i.y<f.top+3?(t.top=5>f.top+3-i.y?-5:-20,o.addClass("ps-in-scrolling")):i.y>f.bottom-3?(t.top=5>i.y-f.bottom+3?5:20,o.addClass("ps-in-scrolling")):t.top=0;0===t.top&&0===t.left?u():e()}})}function si(t,i){function w(n,t){o.scrollTop(o.scrollTop()-t);o.scrollLeft(o.scrollLeft()-n);d()}function c(){e=!0}function l(){e=!1}function b(n){return n.originalEvent.targetTouches?n.originalEvent.targetTouches[0]:n.originalEvent}function k(n){var t=n.originalEvent;return t.targetTouches&&1===t.targetTouches.length?!0:t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE?!0:!1}function a(n){if(k(n)){h=!0;var t=b(n);f.pageX=t.pageX;f.pageY=t.pageY;p=(new Date).getTime();null!==u&&clearInterval(u);n.stopPropagation()}}function v(n){var s,t;if(!e&&h&&k(n)){var c=b(n),i={pageX:c.pageX,pageY:c.pageY},u=i.pageX-f.pageX,o=i.pageY-f.pageY;w(u,o);f=i;s=(new Date).getTime();t=s-p;t>0&&(r.x=u/t,r.y=o/t,p=s);ri(u,o)&&(n.stopPropagation(),n.preventDefault())}}function y(){!e&&h&&(h=!1,clearInterval(u),u=setInterval(function(){return pt()?.01>Math.abs(r.x)&&.01>Math.abs(r.y)?(clearInterval(u),void 0):(w(30*r.x,30*r.y),r.x*=.8,r.y*=.8,void 0):(clearInterval(u),void 0)},10))}var f={},p=0,r={},u=null,e=!1,h=!1;t&&(n(window).bind(s("touchstart"),c),n(window).bind(s("touchend"),l),o.bind(s("touchstart"),a),o.bind(s("touchmove"),v),o.bind(s("touchend"),y));i&&(window.PointerEvent?(n(window).bind(s("pointerdown"),c),n(window).bind(s("pointerup"),l),o.bind(s("pointerdown"),a),o.bind(s("pointermove"),v),o.bind(s("pointerup"),y)):window.MSPointerEvent&&(n(window).bind(s("MSPointerDown"),c),n(window).bind(s("MSPointerUp"),l),o.bind(s("MSPointerDown"),a),o.bind(s("MSPointerMove"),v),o.bind(s("MSPointerUp"),y)))}function hi(){o.bind(s("scroll"),function(){d()})}function ci(){o.unbind(s());n(window).unbind(s());n(k).unbind(s());o.data("perfect-scrollbar",null);o.data("perfect-scrollbar-update",null);o.data("perfect-scrollbar-destroy",null);et.remove();tt.remove();v.remove();y.remove();o=v=y=et=tt=it=rt=c=l=a=b=p=g=ht=ct=wt=w=nt=ot=lt=at=st=s=null}function li(){d();hi();ti();ii();ei();oi();ui();(bt||kt)&&si(bt,kt);h.useKeyboard&&fi();o.data("perfect-scrollbar",o);o.data("perfect-scrollbar-update",d);o.data("perfect-scrollbar-destroy",ci)}var h=n.extend(!0,{},i),o=n(this),pt=function(){return!!o};if("object"==typeof r?n.extend(!0,h,r):e=r,"update"===e)return o.data("perfect-scrollbar-update")&&o.data("perfect-scrollbar-update")(),o;if("destroy"===e)return o.data("perfect-scrollbar-destroy")&&o.data("perfect-scrollbar-destroy")(),o;if(o.data("perfect-scrollbar"))return o.data("perfect-scrollbar");o.addClass("ps-container");var c,l,a,b,it,p,g,ut,rt,w,nt,ft,st="rtl"===o.css("direction"),s=u(),k=this.ownerDocument||document,v=n("<div class='ps-scrollbar-x-rail'>").appendTo(o),et=n("<div class='ps-scrollbar-x'>").appendTo(v),ht=t(v.css("bottom")),ct=ht===ht,wt=ct?null:t(v.css("top")),ai=t(v.css("borderLeftWidth"))+t(v.css("borderRightWidth")),vi=t(v.css("marginLeft"))+t(v.css("marginRight")),y=n("<div class='ps-scrollbar-y-rail'>").appendTo(o),tt=n("<div class='ps-scrollbar-y'>").appendTo(y),ot=t(y.css("right")),lt=ot===ot,at=lt?null:t(y.css("left")),yi=t(y.css("borderTopWidth"))+t(y.css("borderBottomWidth")),pi=t(y.css("marginTop"))+t(y.css("marginBottom")),bt="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,kt=null!==window.navigator.msMaxTouchPoints;return li(),o})}});window.PSK={LIVE:!0,isInitialized:!1,LiveHubUrl:null,LiveVideoStreamEnabled:!1,Models:{},Collections:{},Views:{},Routers:{},Utils:{},Bus:{},Controller:{},init:function(){"use strict";window.PSK.Routers=new PSK.Routers.Main;Backbone.history.start({pushState:!1});window.PSK.isInitialized=!0},initBox:function(){this.LIVE=!1;this.LiveBox=!0;this.LiveBoxMinimum=10;Backbone.history.start({pushState:!1});window.PSK.isInitialized=!0}};PSK.Controller.Hub=PSK.Controller.Hub||{},function(){var n=this;PSK.Controller.Hub=function(n){var t=this,i;PSKweb.initHub().done(function(){PSKweb.neutralHub.registerListener(t)});this.collection=n.collection;this.sports=n.sports;this.unselectedSports=n.unselectedSports;this.favoritesSports=n.favoritesSports;i=jQuery("<div>").addClass(".connecting-label").html("... connecting to service ...");jQuery(".content-container").prepend(i);this.onInitialState=function(n,r){PSK.Widget&&t.collection.reset(n);PSK.LIVE&&(t.sports.reset(r.Sports),t.unselectedSports.reset(r.Sports),t.favoritesSports.reset(r.Sports),t.collection.reset(n));PSK.LiveBox&&(t.sports.reset(r.Sports),t.collection.reset(n));i.remove();PSK.LIVE;PSK.Bus&&PSK.Bus.liveEvent&&PSK.Bus.liveEvent.trigger("liveEventsLoaded");t.isInitialized=!0};this.onChange=function(n){t.isInitialized&&(PSK.LIVE||PSK.Widget||PSK.LiveBox)&&t.collection.update(n);i.remove()};this.onAliveMessage=function(n,r){(PSK.LIVE||PSK.Widget||PSK.LiveBox)&&t.collection.removeDeadEvents(r);i.remove()};this.onBetStart=function(n){(PSK.LIVE||PSK.LiveBox)&&t.collection.betStart(n)};this.onBetStop=function(n){(PSK.LIVE||PSK.LiveBox)&&t.collection.betStop(n)}};_.extend(PSK.Controller.Hub.prototype,Backbone.Events)}();Backbone.View.prototype.close=function(){this.remove();this.unbind();this.stopListening();this.childViews&&this.childViews.each(function(n){n.close()})};PSK.Utils=PSK.Utils||{},function(){"use strict";var n=1,t=2,i=3;PSK.Utils={switchView:function(n){var t=this.currentView,i;t&&t.cleanup&&t.cleanup();i=n.render();$("#psk-main-layout, #live-offer-box").html(i.el);i.trigger("ready");this.currentView=n},replaceCroatianChars:function(n){n=n||"";return n.replace(/č/g,"c").replace(/Č/g,"C").replace(/Č/g,"C").replace(/ć/g,"c").replace(/Ć/g,"C").replace(/š/g,"s").replace(/Š/g,"S").replace(/Đ/g,"D").replace(/đ/g,"d").replace(/Š/g,"S").replace(/š/g,"s")},trimSpaces:function(n){return(n||"").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},padString:function(r,u,f,e){if(typeof u=="undefined"&&(u=0),typeof f=="undefined"&&(f=" "),typeof e=="undefined"&&(e=t),u+1>=r.length)switch(e){case n:r=new Array(u+1-r.length).join(f)+r;break;case i:var o=u-r.length,s=Math.ceil(o/2),h=o-s;r=new Array(h+1).join(f)+r+new Array(s+1).join(f);break;default:r=r+new Array(u+1-r.length).join(f)}return r},fixContentContainerSize:function(){},teamSetScore:function(n,t){if(t=t||1,n){var u=n.split("-"),i="",r="",f=u.length>1?"0":"&nbsp&nbsp";return($(u).each(function(n,t){var o=t.split(":"),u=PSK.Utils.trimSpaces(o[0]),e=PSK.Utils.trimSpaces(o[1]);u.length<e.length?u=f+u:e.length<u.length&&(e=f+e);i+='<span class="score-spacer">'+u+"<\/span>";r+='<span class="score-spacer">'+e+"<\/span>"}),i=PSK.Utils.trimSpaces(i),r=PSK.Utils.trimSpaces(r),t===1)?i:r}return'<span class="score-spacer">-<\/span>'},checkIE11:function(){return!!navigator.userAgent.match(/(Trident).*(rv:11)/)},renderCards:function(n,t,i){var f=n.get("Cards"),r,u;f&&(r=n.get("Cards").filter(function(n){return n.Team=="home"}),u=n.get("Cards").filter(function(n){return n.Team=="guest"||n.Team=="away"}),r&&r.length>0&&(r=r.sort(function(n,t){return n.Time<t.Time?1:n.Time>t.Time?-1:0}),PSK.Utils.renderTeamCards(n,r,t)),u&&u.length>0&&(u=u.sort(function(n,t){return n.Time<t.Time?-1:n.Time>t.Time?1:0}),PSK.Utils.renderTeamCards(n,u,i)))},renderTeamCards:function(n,t,i){var r=document.createDocumentFragment();$(t).each(function(n,t){var i=document.createElement("span");i.className="event-header-card "+t.Type;t.Time>=0;i.setAttribute("data-container","body");r.appendChild(i)});$(i).find(".event-header-cards span").tooltip("destroy");$(i).html(r);$(i).children("span").tooltip({html:!0,title:_.compose(this._renderCompleteCards,this._wrapper.bind(n))})},_wrapper:function(){return this},_renderCompleteCards:function(n){var r=n.get("Cards").filter(function(n){return n.Team=="home"}),u=n.get("Cards").filter(function(n){return n.Team=="guest"||n.Team=="away"}),e=$("<div><\/div>"),o=$("<table><\/table>").addClass("complete-cards").html('<tr><th class="home">'+n.get("Team1Name")+'<\/th><th colspan="2" class="guest">'+n.get("Team2Name")+"<\/th><\/tr>"),f,i,t;for(e.append(o),t=0;t<Math.max(r.length,u.length);t++)f=$("<tr><\/tr>"),i=$("<td><\/td>").addClass("home"),t<r.length&&r[t].Time>0&&(i.append($("<span><\/span>").text(r[t].Time+"'")),i.append($("<span><\/span>").text(r[t].Player)),i.addClass(r[t].Type)),f.append(i),i=$("<td><\/td>").addClass("guest"),t<u.length&&u[t].Time>0&&(i.append($("<span><\/span>").text(u[t].Time+"'")),i.append($("<span><\/span>").text(u[t].Player)),i.addClass(u[t].Type)),f.append(i),o.append(f);return e.html()}}}();Handlebars.registerHelper("shortNameUpper",function(n){return length=length||16,n.substring(0,length-1)});Handlebars.registerHelper("teamScore",function(n){"use strict";return n?n.replace(":"," - "):""});Handlebars.registerHelper("teamSetScore",function(n,t){return PSK.Utils.teamSetScore(n,t)});Handlebars.registerHelper("SumScore",function(n){return n.length===0?"-":_.reduce(n,function(n,t){return n+ +t},0)});Handlebars.registerHelper("Math",function(n,t,i){return n=parseFloat(n),i=parseFloat(i),{"+":n+i,"-":n-i,"*":n*i,"/":n/i,"%":n%i}[t]});Handlebars.registerHelper("FormatPickOdds",function(){return""});Handlebars.registerHelper("teamSetScoreHtml",function(n,t){var i=PSK.Utils.teamSetScore(n,t);return'<span class="set-score-spacer-cell"><\/span><span class="set-score-cell">'+i.split(" ").join('<\/span><span class="set-score-cell">')+"<\/span>"});Handlebars.registerHelper("FormatPickOdds",function(n){return PSKweb.formatBetPickOdds(n)});Handlebars.registerHelper("sportLabel",function(n){"use strict";return PSKweb.Utils.getDefaultSportName(n)});Handlebars.registerHelper("Translations",function(n){return PSKweb.Translations[n]});Handlebars.registerHelper("Coalesce",function(){var n=_.without(arguments,_.last(arguments));return _.reduce(n,function(n,t){return n?n:t},null)});Handlebars.registerHelper("CascadeWidth",function(n,t){for(var i=2;i<arguments.length-1;i++)if(PSKweb.Core.measureString(n,arguments[i])<=t)return arguments[i];return arguments[arguments.length-2]});PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.AbstractList=Backbone.View.extend({className:"list",events:{all:"onEventTrigger"},initialize:function(n){this.items=[];this.listenTo(this.collection,"add",this.addItem,this);this.listenTo(this.collection,"reset",this.addAll,this);this.listenTo(this.collection,"remove",this.removeItem,this);this.itemViewData=n.itemViewData;this.showAnnouncements=n.showAnnouncements||!1},render:function(){return this.addAll(),this},addAll:function(){this.$el.html("");this.collection.each(function(n){this.addItem(n)},this)},addItem:function(n){var r=this.items.filter(function(t){return t.model==n}),i=this,t;jQuery(r).each(function(n,t){t.close();i.items.splice(i.items.indexOf(t),1)});t=this._createItemView(n);this.items.push(t);this.$el.append(t.render().el)},removeItem:function(n){var t=this.getViewByModel(n),i;t&&(t.cleanup&&t.cleanup(),t.remove(),i=this.items.indexOf(t),this.items.splice(i,1))},getViewByModel:function(n){return _.find(this.items,function(t){return t.model===n})},cleanup:function(){this.collection.off("reset",this.addAll,this);this.off()},_createItemView:function(n){var t={model:n},i;this.itemViewData&&(t.data=this.itemViewData);this.itemViewEl&&(t.el=this.itemViewEl);i=new this.singleItem(t);i.on("all",this.onEventTrigger,this);return i},onEventTrigger:function(n,t){this.trigger(n+":item",t)},removeAllItems:function(){this.collection.each(function(n){this.removeItem(n)},this)},remove:function(){Backbone.View.prototype.remove.call(this,arguments);this.removeAllItems()}})}();PSK.Models=PSK.Models||{},function(){"use strict";PSK.Models.BetOffer=Backbone.Model.extend({idAttribute:"BetOfferId",defaults:{SelectedBetPick:null,SelectedBetPickIndex:-1},initialize:function(){this.betEvent=this.collection.betEvent;this.listenTo(PSKweb.Betslip.Model,"bets:change bets:add bets:remove bets:reset",this.onBetslipChange);this.listenTo(PSKweb.Betslip.Model,"change:ActiveBetslipIndex",this.updateSelectedBet);this.onBetslipChange()},onBetslipChange:function(n){(n===undefined||n.get("EventId")===this.betEvent.get("Id"))&&this.updateSelectedBet()},updateSelectedBet:function(){var n=PSKweb.Betslip.Model.getActiveBetslip().bets.findWhere({BetOfferId:this.get("BetOfferId")});n!==undefined?this.set("SelectedBetPick",n.get("Pick")):this.set("SelectedBetPick",null)}})}();PSK.Models=PSK.Models||{},function(){"use strict";PSK.Models.Contest=Backbone.Model.extend({idAttribute:"ContestId",defaults:{ContestName:"Untitled",ContestOrder:0,NumOfEventsWithVideos:0},initialize:function(){this.events=new PSK.Collections.Event;this.listenTo(this.events,"add",this.onEventsAdd,this);this.listenTo(this.events,"reset",this.onEventsRemove,this);this.listenTo(this.events,"remove",this.onEventsReset,this)},onEventsAdd:function(n){n.hasVideoStream()&&this.set("NumOfEventsWithVideos",this.get("NumOfEventsWithVideos")+1);this.listenTo(n,"change:VideoStreamId",this.onEventVideoStreamIdChange)},onEventsRemove:function(n){n.hasVideoStream()&&this.set("NumOfEventsWithVideos",this.get("NumOfEventsWithVideos")-1);this.stopListening(n)},onContestsReset:function(){this.set("NumOfContestsWithVideos",this.events.reduce(function(n,t){return n+t.hasVideoStream()?1:0},0))},onEventVideoStreamIdChange:function(n){n.hasVideoStream()?this.set("NumOfEventsWithVideos",this.get("NumOfEventsWithVideos")+1):this.set("NumOfEventsWithVideos",this.get("NumOfEventsWithVideos")-1)}})}();PSK.Models=PSK.Models||{};PSK.Utils=PSK.Utils||{},function(){"use strict";PSK.Models.LiveEvent=Backbone.Model.extend({idAttribute:"Id",defaults:{Favorite:!1,Active:!0,IsReallyActive:!0,MatchTimeFormatted:"",StatusFormatted:"",Checked:!1},initialize:function(){this.on("change:BetOffers",this._onBetOffersChange,this);this.on("change:Favorite",this._onFavoriteChange,this);this.on("change:BettingAllowed change:Active",this._updateReallyActive,this);this.on("change:MatchTime",this._updateMatchTimeFormatted,this);this.on("change:Status",this._updateStatusFormatted,this);this._updateReallyActive();this._updateMatchTimeFormatted();this._updateStatusFormatted();this.on("change:StartTime",this._updateStartTime,this);this.betOffers=new PSK.Collections.BetOffer(this.get("BetOffers"),{betEvent:this})},hasVideoStream:function(){return PSKweb.LiveVideoStreamEnabled&&!!this.get("VideoStreamId")},_updateStartTime:function(){var t=parseInt(this.get("StartTime").split(":")[0],10),n;t=t<24?t>=0?t:0:23;this._previousAttributes.StartTime!=null&&(n=parseInt(this._previousAttributes.StartTime.split(":")[0],10),n=n<24?n>=0?n:0:23,t!=n&&PSK.Bus.liveEvent.trigger("changeHourGroup",this));PSK.Bus.liveEvent.trigger("change:StartTime",this)},_onBetOffersChange:function(){this.betOffers.update(this.get("BetOffers"));this._updateReallyActive()},_onFavoriteChange:function(){PSK.Bus.liveEvent.trigger("change:Favorite",this)},_updateReallyActive:function(){var n,t=this.getBetOffersEmptyReason();n=this.hasBetOffersEmpty()&&!t.isValid?!1:this.get("Active")&&this.get("BettingAllowed")&&!this.get("LiveDisabled");this.set("IsReallyActive",n)},getSportLabelKey:function(){return PSKweb.Utils.getDefaultSportName(this.get("SportId"))},parse:function(n){return n},getBetOffersEmptyReason:function(){var n={interrupted:PSKweb.Translations.liveBetOffersEmptyReasonInterrupted,walkover:PSKweb.Translations.liveBetOffersEmptyReasonRetired,retired:PSKweb.Translations.liveBetOffersEmptyReasonRetired,ended:PSKweb.Translations.liveBetOffersEmptyReasonEnded},i=function(t){var i;for(var r in n)t.indexOf(r)>-1&&(i=r);return i},r=function(t){return n.hasOwnProperty(t)?n[t]:PSKweb.Translations.liveBetOffersEmptyReasonDefault},u=this.get("Status")||"".toLowerCase(),t=i(u);return{isValid:typeof t!="undefined",translation:r(t)}},hasBetOffersEmpty:function(){return!this.has("BetOffers")||this.get("BetOffers").length==0},_updateMatchTimeFormatted:function(){var n,t=this.getSportLabelKey(),u=this.get("Status"),r={soccer:"paused",futsal:"paused",handball:"paused","ice-hockey":"paused",basketball:"pause2","american-football":"pause2"},f=r.hasOwnProperty(t)&&r[t]==u,i;f?n=t=="ice-hockey"?PSKweb.Translations.break_short:PSKweb.Translations.halftime_short:(i=this.get("MatchTime"),n=i?i+"'":"");this.set("MatchTimeFormatted",n)},_updateStatusFormatted:function(){var n,r=this.getSportLabelKey(),t=this.get("Status"),i=r=="ice-hockey"?{"1p":"1/3","2p":"2/3","3p":"3/3"}:{"1p":"1/2","2p":"2/2","1set":"1.S.","2set":"2.S.","3set":"3.S.","4set":"4.S.","5set":"5.S.","1q":"1/4","2q":"2/4","3q":"3/4","4q":"4/4","1IT":"1in","1IB":"1in","2IT":"2in","2IB":"2in","3IT":"3in","3IB":"3in","4IT":"4in","4IB":"4in","5IT":"5in","5IB":"5in","6IT":"6in","6IB":"6in","7IT":"7in","7IB":"7in","8IT":"8in","8IB":"8in","9IT":"9in","9IB":"9in",EIT:"ex. in",EIB:"ex. in"};n=i.hasOwnProperty(t)?i[t]:"";this.set("StatusFormatted",n)},isValidEvent:function(){return this.get("LiveDisabled")?!1:!this.get("IsReallyActive")&&this.hasBetOffersEmpty()&&["ended","not_started","retired","retired1","retired2"].indexOf(this.get("Status"))>-1?!1:!0}})}();PSK.Models=PSK.Models||{},function(){"use strict";PSK.Models.Sport=Backbone.Model.extend({idAttribute:"SportId",defaults:{SportName:"Untitled",BetTypes:[],NumOfContestsWithVideos:0},initialize:function(){this.events=new PSK.Collections.Event;this.contests=new PSK.Collections.Contest},onContestNumOfEventsWithVideosChange:function(n){n.get("NumOfEventsWithVideos")>0?this.set("NumOfContestsWithVideos",this.get("NumOfContestsWithVideos")+1):this.set("NumOfContestsWithVideos",this.get("NumOfContestsWithVideos")-1)},getSportLabelKey:function(){return PSKweb.Utils.getDefaultSportName(this.get("SportId"))},resetEvents:function(n){this.events.reset(n);this.contests.reset();_.each(this.events.groupBy("ContestId"),function(n){this._addNewContest(n)},this)},addEvent:function(n){var i=this.contests.findWhere({ContestId:n.get("ContestId")}),e,r,t,f,u,o;if(this.events.add(n),!i)for(i=this._createNewContest(n),this.contests.add(i),this.contests.sort(),e=jQuery(".psk-sport-group.sport-group-type-"+this.getSportLabelKey()+" .psk-contest-list"),o=function(n,t){return jQuery.map(n.children,function(n){return n.attributes["data-contest-id"].value}).filter(function(n){jQuery.inArray(n,jQuery.map(t.models,function(n){return n.id}))},this).length},t=0;t<e.length;t++)if(r=e[t],r.children.length==this.contests.length&&o(r,this.contests)==0)for(t=0;t<this.contests.length;t++)for(f=0;r.children[t].attributes["data-contest-id"].value!=this.contests.models[t].id;)if(jQuery(r).append(r.children[t]),f++>this.contests.length)break;if(i.events.add(n),u=jQuery('.psk-contest[data-contest-id="'+i.get("ContestId")+'"] .psk-event-list'),u.length==1&&u.children().length==i.events.length)for(t=0;t<i.events.length;t++)for(f=0;u.children()[t].attributes["data-event-id"].value!=i.events.models[t].id;)if(u.append(u.children()[t]),f++>i.events.length)break},removeEvent:function(n){this.events.remove(n);var t=this.contests.findWhere({ContestId:n.get("ContestId")});t&&(t.events.remove(n),t.events.length===0&&this.contests.remove(t))},_addNewContest:function(n){if(n&&n.length!==0){var t=this._createNewContest(n[0]);t.events.add(n);this.contests.add(t);t.get("NumOfEventsWithVideos")>0&&this.set("NumOfContestsWithVideos",this.get("NumOfContestsWithVideos")+1);this.listenTo(t,"change:NumOfEventsWithVideos",this.onContestNumOfEventsWithVideosChange)}},_removeContest:function(n){n.get("NumOfEventsWithVideos")>0&&this.set("NumOfContestsWithVideos",this.get("NumOfContestsWithVideos")-1);this.contests.remove(n);this.stopListening(n)},_createNewContest:function(n){return new PSK.Models.Contest({ContestId:n.get("ContestId"),ContestName:n.get("ContestName"),ContestOrder:n.get("ContestOrder")})}})}();PSK.Controller.AbstractEventGrouper=PSK.Controller.AbstractEventGrouper||{},function(){"use strict";PSK.Controller.AbstractEventGrouper=function(){this._init.apply(this,arguments)};_.extend(PSK.Controller.AbstractEventGrouper.prototype,Backbone.Events,{_init:function(n){this.collection=n.collection;this.sports=n.sports;this.listenTo(this.collection,"reset",this._onEventsReset,this);this.listenTo(this.collection,"add",this._onEventAdd,this);this.listenTo(this.collection,"remove",this._onEventRemove,this);this._onBeforeFirstAddEventsToSportGroups&&this._onBeforeFirstAddEventsToSportGroups();this._addEventsToSportGroups()},_addEventsToSportGroups:function(){var n=this.collection.groupBy(function(n){return n.get("SportId")}),t;this.sports.each(function(i){n[i.get("SportId")]?(t=new Backbone.Collection(n[i.get("SportId")]),i.resetEvents(t.where({IsAnnouncement:!1}))):i.resetEvents()})},_clearSportGroups:function(){this.sports.each(function(n){n.resetEvents()});this.favoriteBets&&this.unselectedBets&&(this.favoriteBets.reset(),this.unselectedBets.reset())},_onEventsReset:function(){this._clearSportGroups();this._addEventsToSportGroups()},_onEventAdd:function(n){n.get("SportId")&&(n.get("IsAnnouncement")||this.sports.get(n.get("SportId")).addEvent(n))},_onEventRemove:function(n){n.get("SportId")&&this.sports.get(n.get("SportId")).removeEvent(n)}})}();PSK.Controller.CalendarGrouper=PSK.Controller.CalendarGrouper||{},function(){"use strict";PSK.Controller.CalendarGrouper=function(){this._init.apply(this,arguments)};_.extend(PSK.Controller.CalendarGrouper.prototype,Backbone.Events,{_init:function(n){this.collection=n.collection;this.calGroups=n.calGroups;this.listenTo(this.collection,"reset",this._onEventsReset,this);this.listenTo(this.collection,"add",this._onEventAdd,this);this.listenTo(this.collection,"remove",this._onEventRemove,this);this._initCalGroups();this._addEventsToCalGroups(this.collection)},_initCalGroups:function(){for(var t,n=1;n<=7;n++)for(this.calGroups[n]={day:n},t=0;t<=23;t++)this.calGroups[n][t]=new PSK.Collections.CalendarGroup,this.calGroups[n][t].hour=t,this.calGroups[n][t].day=n},_addEventsToCalGroups:function(){this.collection.each(function(n){var t=this._getEventDayOfTheWeek(n),i=this._getEventHour(n);this.calGroups[t][i].add(n)},this)},_clearCalGroups:function(n){for(var i,t=1;t<=7;t++)for(i=0;i<=23;i++)this.calGroups[t][i].reset(n)},_onEventsReset:function(){this._clearCalGroups();this._addEventsToCalGroups()},_onEventAdd:function(n){var t=this._getEventDayOfTheWeek(n),i=this._getEventHour(n);this.calGroups[t][i].add(n)},_onEventRemove:function(n){var t=this._getEventDayOfTheWeek(n),i=this._getEventHour(n);this.calGroups[t][i].remove(n)},_getEventDayOfTheWeek:function(n){var t=parseInt(n.get("StartDay"),10);return t<7?t==0?7:t:7},_getEventHour:function(n){if(n.get("StartTime")){var t=parseInt(n.get("StartTime").split(":")[0],10);return t<24?t>=0?t:0:23}return 0}})}();PSK.Controller.EventGrouper=PSK.Controller.EventGrouper||{},function(){"use strict";PSK.Controller.EventGrouper=function(){this._init.apply(this,arguments)};_.extend(PSK.Controller.EventGrouper.prototype,PSK.Controller.AbstractEventGrouper.prototype,{_init:function(n){PSK.Controller.AbstractEventGrouper.prototype._init.apply(this,arguments);this.favoriteBets=n.favoriteBets;this.unselectedBets=n.unselectedBets;this.listenTo(this.collection,"change:IsAnnouncement",this._onAnnouncementChange,this)},_onAnnouncementChange:function(n){if(n.get("SportId")){var t=n.get("IsAnnouncement"),i=n.get("Favorite");t||(this.unselectedBets!=null&&(this.unselectedBets.remove(n),this.unselectedBets.add(n)),this.sports.get(n.get("SportId")).addEvent(n))}},_addEventsToSportGroups:function(){PSK.Controller.AbstractEventGrouper.prototype._addEventsToSportGroups.call(this);this.collection.each(function(n){n.get("IsAnnouncement")||(n.get("Favorite")?this.favoriteBets.add(n):this.unselectedBets.add(n))},this)},_onBeforeFirstAddEventsToSportGroups:function(){this.storedFavoriteEventIds=this._getFavoritesFromLocalStorage();this.storedMultiviewEventIds=this._getMultiviewFromLocalStorage();PSK.eventGrouper=this},_onEventsReset:function(){this.collection.map(function(n){this._checkIfEventShouldBeFavorited(n);this._checkIfEventShouldBeInMultiview(n)},this);PSK.Controller.AbstractEventGrouper.prototype._onEventsReset.call(this)},_onEventAdd:function(n){n.get("SportId")&&(this._checkIfEventShouldBeFavorited(n),this._checkIfEventShouldBeInMultiview(n),PSK.Controller.AbstractEventGrouper.prototype._onEventAdd.call(this,n),n.get("Favorite")?this.favoriteBets.add(n):this.unselectedBets.add(n))},_onEventRemove:function(n){n.get("SportId")&&(PSK.Controller.AbstractEventGrouper.prototype._onEventRemove.call(this,n),n.get("Favorite")?this.favoriteBets.remove(n):this.unselectedBets.remove(n))},_getFavoritesFromLocalStorage:function(){var n=JSON.parse(window.localStorage.getItem("favoriteEvents"));return _.isArray(n)?n:[]},_checkIfEventShouldBeFavorited:function(n){var t=this.storedFavoriteEventIds.indexOf(n.get("Id"));t>=0&&(n.set("Favorite",!0),this.storedFavoriteEventIds.splice(t,1))},_getMultiviewFromLocalStorage:function(){var n=JSON.parse(window.localStorage.getItem("multiviewEvents"));return _.isArray(n)?n:[]},_checkIfEventShouldBeInMultiview:function(n){var t=this.storedMultiviewEventIds.indexOf(n.get("Id"));t>=0&&(n.set("InMultiview",!0),this.storedMultiviewEventIds.splice(t,1))}})}();PSK.Controller.FavoritesGrouper=PSK.Controller.FavoritesGrouper||{},function(){"use strict";PSK.Controller.FavoritesGrouper=function(){this._init.apply(this,arguments)};_.extend(PSK.Controller.FavoritesGrouper.prototype,PSK.Controller.AbstractEventGrouper.prototype,{_init:function(){PSK.Controller.EventGrouper.prototype._init.apply(this,arguments);this.listenTo(PSK.Bus.liveEvent,"change:Favorite",function(n){n.get("Favorite")?this.collection.add(n):this.collection.remove(n);this._storeFavoritesToLocalStorage()},this)},_storeFavoritesToLocalStorage:function(){var n=this.collection.pluck("Id");return window.localStorage.setItem("favoriteEvents",JSON.stringify(n))}})}();PSK.Controller.LiveboxGrouper=PSK.Controller.LiveboxGrouper||{},function(){"use strict";PSK.Controller.LiveboxGrouper=function(){this._init.apply(this,arguments)};_.extend(PSK.Controller.LiveboxGrouper.prototype,PSK.Controller.AbstractEventGrouper.prototype,{_init:function(n){PSK.Controller.EventGrouper.prototype._init.apply(this,arguments);this.source=n.source;this.collection=n.collection;PSK.Bus.liveEvent.once("liveEventsLoaded",function(){var n=this.source.where({IsAnnouncement:!1,IsOnHomePage:!0,IsReallyActive:!0});n.length<PSK.LiveBoxMinimum&&(n=_.union(n,_.sample(this.source.where({IsAnnouncement:!1,IsOnHomePage:!1,IsReallyActive:!0}),PSK.LiveBoxMinimum-n.length)));this.collection.reset(n)},this);this.listenTo(this.source,"add change",function(n){var t=this;!n.get("IsAnnouncement")&&n.get("IsReallyActive")&&(n.get("IsOnHomePage")||t.collection.length<10)?(t.collection.add(n),t.collection.length>PSK.LiveBoxMinimum&&t.collection.remove(_.sample(t.collection.where({IsOnHomePage:!1})))):t.collection>10&&t.collection.remove(n)},this);this.listenTo(this.source,"change:IsReallyActive",function(n){n.get("IsReallyActive")||this.collection.remove(n)},this)}})}();PSK.Controller.UnselectedGrouper=PSK.Controller.UnselectedGrouper||{},function(){"use strict";PSK.Controller.UnselectedGrouper=function(){this._init.apply(this,arguments)};_.extend(PSK.Controller.UnselectedGrouper.prototype,PSK.Controller.AbstractEventGrouper.prototype,{_init:function(){PSK.Controller.EventGrouper.prototype._init.apply(this,arguments);this.listenTo(this.collection,"change:IsAnnouncement",function(n){n.get("IsAnnouncement")?this.collection.remove(n):(this.collection.remove(n),this.collection.add(n))},this);this.listenTo(PSK.Bus.liveEvent,"change:Favorite",function(n){n.get("Favorite")?this.collection.remove(n):this.collection.add(n)},this)}})}();PSK.Collections=PSK.Collections||{},function(){"use strict";PSK.Collections.Event=Backbone.Collection.extend({model:PSK.Models.LiveEvent,url:"mock/bet.json",parse:function(n){return n.data},update:function(n){for(var e=this,i,t,f=[],u,r=n.length-1;r>=0;r--)if(t=n[r],this.isValid(t))if(i=this.get(t[this.model.prototype.idAttribute]),i)u=$.extend(!0,{},i.toJSON()),PSKweb.Betslip.Model.overwriteProperties(u,t),i.set(u);else{if(t.ContestId==null){console.log("Primljena je poruka s novim događajem koji nema ContestId: "+t.Id);PSKweb!=null&&PSKweb.neutralHub!=null&&PSKweb.neutralHub.getEventDataById!=null&&PSKweb.neutralHub.getEventDataById(t.Id).done(function(n){n!=null&&(e.update([n]),console.log("Updateani su podaci za događaj "+n.Id))});continue}f.push(t)}this.add(f)},reset:function(n,t){t=t||{};t.silent||this.trigger("prereset",this,t);Backbone.Collection.prototype.reset.call(this,n!=null?n.filter(this.isValid):n,t)},isValid:function(n){var t=n.SportId||(n.get!==undefined?n.get("SportId"):null),i=n.Id||n.get("Id");return t==null?!0:PSK.eventGrouper!=null&&PSK.eventGrouper.sports.get(t)===undefined||PSK.liveboxController!=null&&PSK.liveboxController.sports.get(t)===undefined?(console.log("Input error: otkriven događaj (ID: "+i+") s neispravnim ID sporta - "+t),!1):!0},comparator:function(n,t){if(n.get("DisplayIndex")>t.get("DisplayIndex"))return 1;if(n.get("DisplayIndex")<t.get("DisplayIndex")||n.get("StartDate")==null||n.get("StartTime")==null)return-1;if(t.get("StartDate")==null||t.get("StartTime")==null)return 1;var i=(n.get("StartDate")+" "+n.get("StartTime")).match(/[0-9]+/g),r=(t.get("StartDate")+" "+t.get("StartTime")).match(/[0-9]+/g),u=new Date(i[2],i[1]-1,i[0],i[3],i[4]),f=new Date(r[2],r[1]-1,r[0],r[3],r[4]);return u>f?1:u<f?-1:n.get("Name")>t.get("Name")?1:n.get("Name")<t.get("Name")?-1:0},betStart:function(n){try{_.each(n,function(n){var t=this.get(n);t.hasBetOffersEmpty()==!1&&this.get(n).set("IsReallyActive",!0)},this)}catch(t){}},betStop:function(n){try{_.each(n,function(n){var t=this.get(n);t&&t.set("IsReallyActive",!1)},this)}catch(t){}},removeAliveEvents:function(n){var t=this.where({IsAnnouncement:!1}),i=_.pluck(_.map(t,function(n){return n.toJSON()}),"Id"),r=_.difference(i,n);_.each(r,function(n){this.remove(this.get(n))},this)},removeDeadEvents:function(n){_.each(n,function(n){this.remove(this.get(n))},this)},hasUnselectedEvents:function(n){var t=this.models.filter(function(n){return!n.get("IsAnnouncement")}),i=t.every(function(t){return n.indexOf(t)!==-1});return!i}})}();PSK.Collections=PSK.Collections||{},function(){"use strict";PSK.Collections.UnsortedEvent=PSK.Collections.Event.extend({comparator:function(){}})}();PSK.Collections=PSK.Collections||{},function(){"use strict";PSK.Collections.BetOffer=Backbone.Collection.extend({initialize:function(n,t){this.betEvent=t.betEvent},model:PSK.Models.BetOffer,update:function(n){for(var i,u,f=[],r,e,t=n.length-1;t>=0;t--)u=n[t],i=this.get(u[this.model.prototype.idAttribute]),i?i.set(u):f.push(u);for(e=jQuery.map(n,function(n){return n.BetOfferId}),t=this.length-1;t>=0;t--){for(i=this.at(t),r=0;r<n.length;r++)if(e[r]==i.get("BetOfferId"))break;r==n.length&&this.remove(i)}this.add(f)},comparator:function(n,t){var i,r,u,f;if(n.get("Order")<t.get("Order"))return-1;if(n.get("Order")>t.get("Order"))return 1;if(i=n.get("SpecialBetValue"),r=t.get("SpecialBetValue"),i!=null&&r!=null&&n.get("BetTypeId")==t.get("BetTypeId")){if(jQuery.isNumeric(i)&&jQuery.isNumeric(r)&&(u=parseFloat(i),f=parseFloat(r),!isNaN(u)&&!isNaN(f))){if(u<f)return-1;if(u>f)return 1}if(i<r)return-1;if(i>r)return 1}return n.get("BetTypeId")<t.get("BetTypeId")?-1:n.get("BetTypeId")>t.get("BetTypeId")?1:0}})}();PSK.Collections=PSK.Collections||{},function(){"use strict";PSK.Collections.Sport=Backbone.Collection.extend({model:PSK.Models.Sport,url:"mock/sports.json",hasUnselectedEvents:function(n){return!this.every(function(t){return!t.events.hasUnselectedEvents(n)})}})}();PSK.Collections=PSK.Collections||{},function(){"use strict";PSK.Collections.Contest=Backbone.Collection.extend({model:PSK.Models.Contest,comparator:function(n,t){return n.get("ContestOrder")<t.get("ContestOrder")?-1:n.get("ContestOrder")>t.get("ContestOrder")?1:n.get("ContestName")<t.get("ContestName")?-1:n.get("ContestName")>t.get("ContestName")?1:0}})}();PSK.Collections=PSK.Collections||{},function(){"use strict";PSK.Collections.CalendarGroup=Backbone.Collection.extend({model:PSK.Models.LiveEvent,url:"mock/bet.json",parse:function(n){return n.data},update:function(n){for(var r,t,u=[],i=n.length-1;i>=0;i--)t=n[i],r=this.get(t[this.model.prototype.idAttribute]),r?r.set(t):u.push(t);this.add(u)},reset:function(n,t){t=t||{};t.silent||this.trigger("prereset",this,t);Backbone.Collection.prototype.reset.call(this,n,t)},comparator:function(n,t){if(n.get("StartDate")==null||n.get("StartTime")==null)return-1;if(t.get("StartDate")==null||t.get("StartTime")==null)return 1;var i=(n.get("StartDate")+" "+n.get("StartTime")).match(/[0-9]+/g),r=(t.get("StartDate")+" "+t.get("StartTime")).match(/[0-9]+/g),u=new Date(i[2],i[1]-1,i[0],i[3],i[4]),f=new Date(r[2],r[1]-1,r[0],r[3],r[4]);return u>f?1:u<f?-1:n.get("Name")>t.get("Name")?1:n.get("Name")<t.get("Name")?-1:0},removeAliveEvents:function(n){var t=this.where({IsAnnouncement:!1}),i=_.pluck(_.map(t,function(n){return n.toJSON()}),"Id"),r=_.difference(i,n);_.each(r,function(n){this.remove(this.get(n))},this)},removeDeadEvents:function(n){_.each(n,function(n){this.remove(this.get(n))},this)}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.BetLayout=Backbone.View.extend({el:"#psk-main-layout",template:JST["LiveBetting/gui/templates/bet-layout.hbs"],tagName:"div",id:"",className:"",events:{},isIE:!1,initialize:function(){this.isIE=PSK.Utils.checkIE11()},render:function(){return this.$el.html(this.template()),this.isIE&&this.$el.find(".multi-view").addClass("IE11-WIN7"),this}})}();PSK.Views=PSK.Views||{},function(){"use strict";var t=$(window),n;PSK.Views.TicketPositioner=function(){this.initialize.apply(this,arguments);n=$("body")};_.extend(PSK.Views.TicketPositioner.prototype,{Position:{ABSOLUTE:0,STICKY_TOP:1,STICKY_BOTTOM:2},DefaultTicketContainerSelector:".ticket-main-layout",DefaultFooterContentSelector:"#footer-content",initialize:function(n){n=n||{};this.elSelector=n.ticketContainerSelector||this.DefaultTicketContainerSelector;this.footerSelector=n.footerContentSelector||this.DefaultFooterContentSelector;this.$el=$(this.elSelector);this.el=this.$el[0];PSK.ticketPositioner=this},cleanup:function(){},onScroll:function(){this.initialOffset=this.initialOffset||this.$el.offset();this.footerHeight=this.footerHeight||$(this.footerSelector).height();var t=window.scrollY||window.pageYOffset||window.document.documentElement.scrollTop,i=Math.max(-(n.height()-window.innerHeight-t-this.footerHeight),0),u=t+window.innerHeight>=this.$el.offset().top+this.$el.height(),r=window.innerHeight<this.$el.height()+i;t<=this.initialOffset.top?this.position!==this.Position.ABSOLUTE&&(this.position=this.Position.ABSOLUTE,this.$el.css({position:"static",top:"auto",bottom:"auto"})):u&&r||r&&i>0?(this.position=this.Position.STICKY_BOTTOM,this.$el.css({position:"fixed",bottom:i+50+"px",top:"auto"})):this.position!==this.Position.STICKY_TOP&&(this.position=this.Position.STICKY_TOP,this.$el.css({position:"fixed",top:0,bottom:"auto"}))}})}();PSK.Views=PSK.Views||{};PSK.Utils=PSK.Utils||{},function(){"use strict";PSK.Views.EventInfoBase=Backbone.View.extend({events:{"click .event-header-favourite":"onFavoriteClick","click .event-header-stream":"onVideoStartClick","click .event-header-statistic":"onStatisticClick"},renderVideos:function(){this.model.hasVideoStream()?this.$(".event-header-stream").addClass("active"):this.$(".event-header-stream").removeClass("active");this.model.Video2?this.$(".event-header-video2").show():this.$(".event-header-video2").hide()},renderFavorite:function(){this.$(".event-header-favourite")[this.model.get("Favorite")?"addClass":"removeClass"]("active")},onFavoriteClick:function(){this.model.set("Favorite",!this.model.get("Favorite"))},onVideoStartClick:function(){PSKweb.VideoStreamController.playVideo(this.model)},onStatisticClick:function(){PSK.Bus.statistic.trigger("open",this.model.get("Id"))}})}();PSK.Views=PSK.Views||{};PSK.Utils=PSK.Utils||{},function(){"use strict";PSK.Views.EventInfoNogomet=PSK.Views.EventInfoBase.extend({initialize:function(n){this.listenTo(this.model,"change:MatchTimeFormatted",this._onMatchTimeChange,this);this.listenTo(this.model,"change:Team1Score change:Team2Score",this._onScoreChange,this);this.listenTo(this.model,"change:Cards",this._onCardsChange,this);this.favoriteCollection=n.favoriteCollection},render:function(){return this.$(".event-header-cards span").tooltip("destroy"),this.$el.html(JST["LiveBetting/gui/templates/event/info/"+this.model.getSportLabelKey()+".hbs"](this.model.toJSON())),this.$(".team1-name").text().length!=this.model.get("Team1Name").length&&(this.$(".team1-name").attr("title",this.model.get("Team1Name")),this.$(".team1-name").tooltip()),this.$(".team2-name").text().length!=this.model.get("Team2Name").length&&(this.$(".team2-name").attr("title",this.model.get("Team2Name")),this.$(".team2-name").tooltip()),this._onMatchTimeChange(),this.renderVideos(),this.renderFavorite(),PSK.Utils.renderCards(this.model,this.$(".event-header-cards.top"),this.$(".event-header-cards.bottom")),this},_onMatchTimeChange:function(){this.$(".event-info-minutes").text(this.model.get("MatchTimeFormatted"))},_onScoreChange:function(n){this.$(".event-header-result.top").text(n.get("Team1Score"));this.$(".event-header-result.bottom").text(n.get("Team2Score"))},_onCardsChange:function(){this.$(".event-header-cards span").tooltip("destroy");PSK.Utils.renderCards(this.model,this.$(".event-header-cards.top"),this.$(".event-header-cards.bottom"))}})}();PSK.Views=PSK.Views||{};PSK.Utils=PSK.Utils||{},function(){"use strict";PSK.Views.EventInfoTenis=PSK.Views.EventInfoBase.extend({initialize:function(n){this.template=JST["LiveBetting/gui/templates/event/info/"+this.model.getSportLabelKey()+".hbs"];this.listenTo(this.model,"change:Team1SetScores change:Team2SetScores",this._onTeamSetScore);this.listenTo(this.model,"change:Team1GameScore change:Team2GameScore",this._onGameSetScore);this.listenTo(this.model,"change:Server",this._setCurrentServer);this.favoriteCollection=n.favoriteCollection},render:function(){return this.$el.html(this.template(this.model.toJSON())),this._renderPlayers(),this.renderVideos(),this.renderFavorite(),this},_onTeamSetScore:function(n){this.$(".set-score-team1").html(_.reduce(n.get("Team1SetScores"),function(n,t){return n+'<span class="event-header-set-score set-score-cell">'+t+"<\/span>"},""));this.$(".set-score-team2").html(_.reduce(n.get("Team2SetScores"),function(n,t){return n+'<span class="event-header-set-score set-score-cell">'+t+"<\/span>"},""))},_onGameSetScore:function(n){this.$(".game-score-team1").text(n.get("Team1GameScore"));this.$(".game-score-team2").text(n.get("Team2GameScore"))},_scoreChangeFormater:function(n){var t="",i="",r;return n&&(r=n.split("-"),$(r).each(function(n,r){var u=r.split(":"),f=PSK.Utils.trimSpaces(u[0]),e=PSK.Utils.trimSpaces(u[1]);t+=f+" ";i+=e+" "}),t=PSK.Utils.trimSpaces(t),i=PSK.Utils.trimSpaces(i)),[t,i]},_setCurrentServer:function(){this.$(".player1-name, .player2-name").removeClass("player-with-serve");this.model.get("Server")=="1"?this.$(".player1-name").addClass("player-with-serve"):this.model.get("Server")=="2"&&this.$(".player2-name").addClass("player-with-serve")},_renderPlayers:function(){this.model.get("Team1Name").length>20&&(this.$(".player1-name").attr("title",this.model.get("Team1Name")),this.$(".player1-name").tooltip());this.model.get("Team2Name").length>20&&(this.$(".player2-name").attr("title",this.model.get("Team2Name")),this.$(".player2-name").tooltip());this.model.get("Server")=="1"?this.$(".player1-name").addClass("player-with-serve"):this.model.get("Server")=="2"&&this.$(".player2-name").addClass("player-with-serve")}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.EventInfoHokej=PSK.Views.EventInfoTenis.extend({initialize:function(){PSK.Views.EventInfoHokej.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"change:MatchTimeFormatted",this._onMatchTimeChange,this);this.listenTo(this.model,"change:Team1Score change:Team2Score",this._onScoreChange,this)},_onMatchTimeChange:function(){this.$(".event-info-minutes").text(this.model.get("MatchTimeFormatted"))},_onScoreChange:function(n){this.$(".game-score-team1").text(n.get("Team1Score"));this.$(".game-score-team2").text(n.get("Team2Score"))}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.EventInfoOdbojka=PSK.Views.EventInfoTenis.extend({initialize:function(){PSK.Views.EventInfoOdbojka.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"change:Team1Score change:Team2Score",this._onScoreChange,this)},_onScoreChange:function(n){this.$(".game-score-team1").text(n.get("Team1Score"));this.$(".game-score-team2").text(n.get("Team2Score"))}})}();PSK.Views=PSK.Views||{};PSK.Utils=PSK.Utils||{},function(){"use strict";PSK.Views.EventInfoBaseball=PSK.Views.EventInfoBase.extend({initialize:function(n){this.template=JST["LiveBetting/gui/templates/event/info/"+this.model.getSportLabelKey()+".hbs"];this.listenTo(this.model,"change:Team1SetScores change:Team2SetScores",this._onTeamSetScore);this.listenTo(this.model,"change:Status",this._setCurrentServer);this.favoriteCollection=n.favoriteCollection},render:function(){return this.$el.html(this.template(this.model.toJSON())),this._renderPlayers(),this.renderVideos(),this.renderFavorite(),this},_onTeamSetScore:function(n){var t=n.get("Team1SetScores"),i=n.get("Team2SetScores");this.$(".set-score-team1").html(this.scoreHtml(t));this.$(".set-score-team2").html(this.scoreHtml(t));this.$("event-header-game.game-score-team1").text(this.sumScore(t));this.$("event-header-game.game-score-team2").text(this.sumScore(i))},scoreHtml:function(n){return _.reduce(n,function(n,t){return n+'<span class="event-header-set-score set-score-cell">'+t+"<\/span>"},"")},sumScore:function(n){return n.length===0?"-":_.reduce(n,function(n,t){return n+ +t},0)},_setCurrentServer:function(){this.$(".player1-name, .player2-name").removeClass("player-with-serve");var n=this.model.get("Status").substr(-2);n==="IT"?this.$(".player2-name").addClass("player-with-serve"):n==="IB"&&this.$(".player1-name").addClass("player-with-serve");this.$(".event-info-minutes").text(this.model.get("StatusFormatted"))},_renderPlayers:function(){this.model.get("Team1Name").length>20&&(this.$(".player1-name").attr("title",this.model.get("Team1Name")),this.$(".player1-name").tooltip());this.model.get("Team2Name").length>20&&(this.$(".player2-name").attr("title",this.model.get("Team2Name")),this.$(".player2-name").tooltip());this._setCurrentServer()}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.EventBetOffer=Backbone.View.extend({template:JST["LiveBetting/gui/templates/event/bet-offer.hbs"],className:"bet-offer",events:{"click .bet-pick[data-pick]":"onBetPickClick"},initialize:function(n){this.betEvent=n.betEvent;this.specialBetVisible=!!n.specialBetVisible;this.classRemovalTimers={};this.listenTo(this.model,"change:SpecialBetValue",this.updateSpecialBetValue,this);this.listenTo(this.model,"change:Picks",this.checkChangedAttributes,this);this.listenTo(this.model,"change:SelectedBetPick",this.onSelectedBetPickChange);this.$el.addClass("bet-offer-"+this.model.get("BetOfferId"))},serializeData:function(){var n=this.model.toJSON(),t;for(n.SpecialBetValueVisible=this._specialBetVisible(),n.Picks.sort(function(n,t){return n.Order-t.Order}),n.PickCount=n.Picks.length+(n.SpecialBetValueVisible?1:0),n.SportName=this.betEvent.getSportLabelKey(),t=0;t<n.Picks.length;t++)n.Picks[t].Index=t,n.Picks[t].PickCount=n.PickCount;return n},render:function(){return this.$el.html(this.template(this.serializeData())),this.$betPicks=this.$(".bet-pick:not(.bet-pick-special)"),this.$specialBetPick=this.$(".bet-pick-special"),this.onSelectedBetPickChange(),this},updateSpecialBetValue:function(){this._specialBetVisible()&&this.$specialBetPick.text(this.model.get("SpecialBetValue"))},_specialBetVisible:function(){return this.model.get("SpecialBetValue")&&this.specialBetVisible},checkChangedAttributes:function(n){for(var t,i,r=n._previousAttributes.Picks.length-1;r>=0;r--)i=n._previousAttributes.Picks[r],t=_.findWhere(n.changed.Picks,{BetTypePick:i.BetTypePick}),t&&i.Odds!==t.Odds&&this._showUpperDowners(n,i,t)},_showUpperDowners:function(n,t,i){var f=this,r=n.changed.Picks.indexOf(i),u=$(this.$betPicks[r]),e=t.Odds||0,o=i.Odds||0;u.removeClass("upper downer").addClass(e<o?"upper":"downer");this.classRemovalTimers[r]&&(window.clearTimeout(this.classRemovalTimers[r]),delete this.classRemovalTimers[r]);this.classRemovalTimers[r]=window.setTimeout(function(){u.removeClass("upper downer");delete f.classRemovalTimers[r]},5e3);this._updateOddsValueChange(u,i.Odds)},_updateOddsValueChange:function(n,t){n.html(PSKweb.formatBetPickOdds(t))},onBetPickClick:function(n){var t=$(n.target).closest(".bet-pick");t.hasClass("bet-pick-special-offer")||this.betEvent.get("IsReallyActive")&&PSKweb.Betslip.Controller.toggleBet(this.model.get("BetOfferId"),t.data("pick"),t[0])},onSelectedBetPickChange:function(){var n=this.model.get("SelectedBetPick");this.$betPicks.removeClass("selected");this.$betPicks.filter("[data-pick='"+n+"']").addClass("selected")}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.Contest=Backbone.View.extend({template:JST["LiveBetting/gui/templates/event/contest.hbs"],tagName:"div",className:"psk-contest",events:{"click .contest-header":"onExpandClick"},initialize:function(n){this.expanded=!0;this.hidden=!1;this.$el.addClass("expanded");this.$el.attr("data-contest-id",this.model.get("ContestId"));this.eventListView=new PSK.Views.EventList({collection:this.model.events,itemViewData:{betTypes:n.data.betTypes}});this.listenTo(this.model,"change:NumOfEventsWithVideos",this.updateVideoFilter,this);this.listenTo(this.eventListView,"hiddenChanged:item",this.onHiddenChanged,this)},onHiddenChanged:function(){var n=this.$el.hasClass("hidden");this.$el[this.model.events.models.some(function(n){return n.isValidEvent()})?"removeClass":"addClass"]("hidden");n!=this.$el.hasClass("hidden")&&this.trigger("hiddenChanged")},render:function(){return this.$el.html(this.template(this.serializeData())),this.$eventListContainer=this.$(".contest-event-list-container"),this.$eventListContainer.html(this.eventListView.render().el),this},updateVideoFilter:function(){this.videoFiltering&&this.model.get("NumOfEventsWithVideos")===0&&!this.hidden?(this.$el.hide(),this.hidden=!0):this.hidden&&(this.$el.show(),this.hidden=!1)},toggleVideoStreamFilter:function(n){this.videoFiltering!==n&&(this.videoFiltering=!!n,this.updateVideoFilter())},serializeData:function(){return this.model.toJSON()},onExpandClick:function(){this.expanded?(this.$eventListContainer.slideUp(),this.$el.removeClass("expanded")):(this.$eventListContainer.slideDown(),this.$el.addClass("expanded"));this.expanded=!this.expanded}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.ContestList=PSK.Views.AbstractList.extend({singleItem:PSK.Views.Contest,className:"psk-contest-list",toggleVideoStreamFilter:function(n){this.videoFiltering!==n&&(this.videoFiltering=n,_.each(this.items,function(t){t.toggleVideoStreamFilter(n)}))}})}();PSK.Views=PSK.Views||{},function(){"use strict";var n={"american-football":PSK.Views.EventInfoTenis,baseball:PSK.Views.EventInfoBaseball,basketball:PSK.Views.EventInfoNogomet,"beach-volleyball":PSK.Views.EventInfoOdbojka,darts:PSK.Views.EventInfoTenis,futsal:PSK.Views.EventInfoNogomet,handball:PSK.Views.EventInfoNogomet,"ice-hockey":PSK.Views.EventInfoHokej,snooker:PSK.Views.EventInfoTenis,soccer:PSK.Views.EventInfoNogomet,tennis:PSK.Views.EventInfoTenis,volleyball:PSK.Views.EventInfoOdbojka};PSK.Views.Event=Backbone.View.extend({template:JST["LiveBetting/gui/templates/event/event.hbs"],tagName:"div",className:"psk-event",events:{"click .bet-pick":"onBetClick","click .event-col-other-bets":"onOtherBetsClick","click .team-names":"onOtherBetsClick"},initialize:function(n){this.eventBetOffers=[];this.betOffersRendered=!1;this.listenTo(this.model,"change",this.onModelChange);this.sportBetTypes=n.data.betTypes},render:function(){var n=this.serializeData();return this.$el.html(this.template(n)),this._updateHeader(),this._renderBetOffers(n.BetOffers),this.$el.attr("data-event-id",this.model.get("Id")),this._updateHiddenStatus(),this},onModelChange:function(){var i=_.keys(this.model.changed),n,t;_.isEqual(jQuery.map(this.model.get("BetOffers"),function(n){return n.BetOfferId}),jQuery.map(this.model.previous("BetOffers"),function(n){return n.BetOfferId}))||(t=this.serializeData(),this._renderBetOffers(t.BetOffers),n=this.$(".event-col-other-bets"),n.length>0&&n.text(t.OtherBetsLabel),$(window).trigger("bet:offer:size-change"));(i.length>0&&!(i.length===1&&this.model.hasChanged("BetOffers"))||this.model.hasChanged("VideoStreamId"))&&this._updateHeader();(this.model.hasChanged("IsReallyActive")||this.model.hasChanged("BetOffers")||this.model.hasChanged("Status")||this.model.hasChanged("LiveDisabled"))&&this._updateHiddenStatus()},_updateHeader:function(){$("div.tooltip:not(:last-child)").remove();this.headerView?this.headerView.renderVideos():(this.headerView=new n[this.model.getSportLabelKey()]({model:this.model}),this.$(".event-col-header").html(this.headerView.render().el));this.$el[this.model.get("Favorite")?"addClass":"removeClass"]("favorite");this.$el[this.model.get("IsReallyActive")?"removeClass":"addClass"]("disabled")},_updateHiddenStatus:function(){this.$el[this.model.isValidEvent()?"removeClass":"addClass"]("hidden");this.trigger("hiddenChanged")},serializeData:function(){var n=this.model.toJSON(),t;return n.BetOffers=this._getBetOffersForRender(),t=0,_.each(n.BetOffers,function(n){t=t+(n!==undefined?1:0)}),n.OtherBetsCount=this.model.get("BetOffers").length,n.OtherBetsLabel=n.OtherBetsCount>0?"+"+n.OtherBetsCount:">",n},_getBetOffersForRender:function(){var n=[],t=_.pluck(this.sportBetTypes,"BetTypeId");return _.each(t,function(t){n.push(this._getMostBalancedOfferForBetTypeId(t))},this),n},_getMostBalancedOfferForBetTypeId:function(n){var t=this.model.betOffers.findWhere({BetTypeId:n,MostBalanced:!0});return t||(t=this.model.betOffers.findWhere({BetTypeId:n})),t},_renderBetOffers:function(n){n=n||this.serializeData().BetOffers;var r,u,i,f,t,e;if(this.betOffersRendered=!0,this._cleanupBetOffers(),u=document.createDocumentFragment(),this.model.hasBetOffersEmpty()&&this.model.get("IsReallyActive")&&(f=this.model.getBetOffersEmptyReason(),f.isValid)){this.$(".bet-offer-list").append('<div class="bet-empty listview">'+f.translation+"<\/div>");return}for(e=function(){this._renderBetOffers()},t=0;t<n.length;t++)n[t]?(r=new PSK.Views.EventBetOffer({model:n[t],betEvent:this.model,specialBetVisible:!!(_.findWhere(this.sportBetTypes,{BetTypeId:n[t].get("BetTypeId")})||{}).SpecialBetValue}),this.listenTo(r,"change:MostBalanced",e,this),i=r.render().el,this.eventBetOffers.push(r)):(i=document.createElement("div"),i.innerHTML="&nbsp;",i.className="bet-offer"),u.appendChild(i);this.$(".bet-offer-list").append(u)},onOtherBetsClick:function(){PSK.Bus.liveEvent.trigger("details",this.model)},cleanup:function(){this.headerView.remove();this._cleanupBetOffers()},_cleanupBetOffers:function(){_.each(this.eventBetOffers,function(n){n.remove();this.stopListening(n)},this);this.$(".bet-offer-list").empty();this.eventBetOffers.length=0}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.EventList=PSK.Views.AbstractList.extend({singleItem:PSK.Views.Event,className:"psk-event-list"})}();PSK.Views=PSK.Views||{},function(){"use strict";var t=$(window),n={TOP:0,STICKY:1,BOTTOM:2};PSK.Views.SportGroup=Backbone.View.extend({template:JST["LiveBetting/gui/templates/event/sport-group.hbs"],headerTemplate:JST["LiveBetting/gui/templates/event/sport-group-header.hbs"],tagName:"div",className:"psk-sport-group",hiddenClass:"hidden",events:{"click .sport-group-header":"onExpandClick"},initialize:function(){this.expanded=!0;this.videoFiltering=!1;this.headerHeight=45;this.$el.addClass("sport-group-type-"+this.model.getSportLabelKey()+" expanded");this.betOfferMaxColCount=this.model.get("BetTypes").length;this.contestListView=new PSK.Views.ContestList({collection:this.model.contests,itemViewData:{betTypes:this.model.get("BetTypes")}});this.listenTo(PSK.Bus.liveEvent,"event-details-dialog:open",this.disableStickyHeader,this);this.listenTo(PSK.Bus.liveEvent,"event-details-dialog:close",this.enableStickyHeader,this);this.listenTo(this.model.events,"add remove reset",this.onEventsCollectionChange,this);this.listenTo(this.contestListView,"hiddenChanged:item",this.onHiddenChanged,this);this.onWindowScroll=_.bind(this.onWindowScroll,this);this.listenTo(PSK.Bus.window,"scroll resize",this.onWindowScroll,this);this.initStickyHeader()},render:function(){this.$el.html(this.template());this.$header=this.$(".sport-group-header");this.$expandButton=this.$(".header-col-expand-button");this.$sportGroupListContainer=this.$(".sport-group-list-container");this.$sportGroupListContainer.html(this.contestListView.render().el);this.onEventsCollectionChange();var n=this;return setTimeout(function(){n.setTop()},50),this.onHiddenChanged(),$(window).trigger("bet:offer:size-change"),this},toggleVideoStreamFilter:function(n){this.videoFiltering!==n&&(this.videoFiltering=n,this.contestListView.toggleVideoStreamFilter(n))},updateVideoFilter:function(){this.videoFiltering&&this.model.get("NumOfContestsWithVideos")===0&&!this.hidden?(this.$el.hide(),this.hidden=!0):this.hidden&&(this.$el.show(),this.hidden=!1)},serializeHeaderData:function(){return _.defaults(this.model.toJSON(),{EventCount:this.videoFiltering?this.model.get("NumOfContestsWithVideos"):this.model.events.filter(function(n){return n.isValidEvent()}).length})},renderHeader:function(){this.$(".sport-group-header").html(this.headerTemplate(this.serializeHeaderData()));this.$(".sport-group-header").addClass("bg-pattern-"+this.model.getSportLabelKey());this.$expandButton=this.$(".header-col-expand-button");$(window).trigger("bet:offer:size-change")},onEventsCollectionChange:function(){this.renderHeader();this.model.events.length===0?(this.$el.addClass(this.hiddenClass),this.disableStickyHeader()):(this.$el.removeClass(this.hiddenClass),this.enableStickyHeader())},onHiddenChanged:function(){this.$el[this.$el.find(".psk-contest:not(.hidden)").length>0?"removeClass":"addClass"](this.hiddenClass);this.renderHeader()},onExpandClick:function(){this.expanded?(this.$sportGroupListContainer.slideUp(),this.$el.removeClass("expanded"),this.disableStickyHeader()):(this.$sportGroupListContainer.slideDown(),this.$el.addClass("expanded"),this.enableStickyHeader());this.expanded=!this.expanded},initStickyHeader:function(){PSK.LIVE&&t.scroll(this.onWindowScroll)},onWindowScroll:function(){var i=window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,t;if(!this._stickyHeaderDisabled){this.headerHeight=this.$header.height();this.$header=this.$header||this.$(".sport-group-header");try{t=this.$el[0].getBoundingClientRect()}catch(r){return}if(!(t.bottom<=0)||t.height!==0&&t.width!==0){if(t.bottom<0){this.setBottom();return}this.position===n.TOP?t.top<=0&&this.setSticky():this.position===n.STICKY||this.position===n.BOTTOM&&i==0?t.top>0?this.setTop():t.bottom<-5?this.setBottom():t.bottom<this.headerHeight?(this._updatingTop=!0,this.$header.css("top",t.bottom-this.headerHeight)):this._updatingTop&&(this.$header.css("top",0),this._updatingTop=!1):t.bottom>=0&&(this.position=n.STICKY,this.$header.css("display","block"));this.$header.hasClass("sticky")?this.$header.width(this.$el.width()):this.$header.css("width","auto")}}},disableStickyHeader:function(){this.setTop();this._stickyHeaderDisabled=!0},enableStickyHeader:function(){this._stickyHeaderDisabled=!1;this.onWindowScroll()},setSticky:function(){this.position=n.STICKY;this.$header=this.$header||this.$(".sport-group-header");this.$header.css({position:"fixed",display:"block",top:"0","z-index":"1"});this.$expandButton.css({display:"none"});this.$header.addClass("sticky");this.$el.css("padding-top",this.headerHeight+"px");this.$header.width(this.$el.width())},setTop:function(){this.position=n.TOP;this.$header=this.$header||this.$(".sport-group-header");this.$header.css({position:"static",display:"block",top:"auto","z-index":"auto","min-width":"auto"});this.$expandButton.css({display:""});this.$header.removeClass("sticky");this.$el.css("padding-top","0px")},setBottom:function(){this.position=n.BOTTOM;this.$header=this.$header||this.$(".sport-group-header");this.$header.css({display:"none"})}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.SportGroupList=Backbone.View.extend({template:JST["LiveBetting/gui/templates/event/sport-group-list.hbs"],tagName:"div",className:"psk-sport-group-list",initialize:function(n){this.sports=n.sports;this.items=[];this.listenTo(this.sports,"reset",this.render,this)},toggleVideoStreamFilter:function(n){this.videoFiltering!==n&&(this.videoFiltering=n,_.each(this.items,function(t){t.toggleVideoStreamFilter(n)}))},render:function(){this.$el.html(this.template());var n=this.$(".psk-sport-group-items");return this.sports.each(function(t){var i=new PSK.Views.SportGroup({model:t});this.items.push(i);n.append(i.render().el)},this),this}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.EventDetailsBetOffer=PSK.Views.EventBetOffer.extend({template:JST["LiveBetting/gui/templates/event-details/bet-offer.hbs"],_updateOddsValueChange:function(n,t){n.find(".pick-odds").html(PSKweb.formatBetPickOdds(t))}})}(),function(){"use strict";PSK.Views.EventDetails=Backbone.View.extend({template:JST["LiveBetting/gui/templates/event-details/event.hbs"],tagName:"div",className:"psk-event-details",events:{"click .event-details__header .toolbar-buttons .button-close":"onHeaderToolbarButtonCloseClick","click .event-details__header .toolbar-buttons .button-star":"onHeaderToolbarButtonFavoriteClick","click .event-details__header .toolbar-buttons .button-statistic":"onHeaderToolbarButtonStatisticClick","click .event-details__header .toolbar-buttons .button-add-to-multiview":"onHeaderAddToMultiviewClick","click .event-details__header .toolbar-buttons .button-video":"onHeaderVideoStartClick","click .bet-offer-toggle":"toggleBetOffer","click .event-details-bet-offer-toggles-switch":"onToggleOfferFilterClick","click .event-details-filter-container .btn-reset":"onFilterResetClick"},initialize:function(){this.listenTo(this.model,"change",this.onModelChange,this);this.listenTo(PSK.Bus.window,"scroll",this.updateHeaderPosition,this);this.betOfferToggles=[];this.betOfferViews=[];this.$el.attr("eventId",this.model.get("Id"));this.updateHeaderPosition=_.bind(this.updateHeaderPosition,this);this.listenTo(PSK.Bus.window,"multiview-scroll",this.updateHeaderPosition,this)},render:function(){var n=this;return this.$el.html(this.template(this.model.toJSON())),this.model.betOffers.sort(),this._renderHeader(),this._renderBetOfferToggles(),this._renderBetOffers(),this.$betOffersContainer=this.$(".event-details__bet-offers"),this.$eventDetailsHeader=this.$(".event-details__header"),this.$betOfferTogglesContainer=this.$(".event-details-bet-offer-toggles"),this.$betFilterSwith=this.$(".event-details-bet-offer-toggles-switch"),this.$resetButton=this.$(".event-details-filter-container .btn-reset"),this.$multiview=$(".multiview"),this.$eventDetailsFilterContainer=this.$(".event-details-filter-container"),this.$eventDetailsFilterList=this.$(".event-details-bet-offer-toggles"),this.betOfferToggles.length&&this.$resetButton.removeClass("off").addClass("on"),PSK.IsBetradarStatisticEnabled?this.$el.find(".toolbar-button.button-statistic").removeClass("no-statistic"):this.$el.find(".toolbar-button.button-statistic").addClass("no-statistic"),this},updateHeaderPosition:function(){var t=window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,n=parseInt(t-this.$el.offset().top,10);this.$eventDetailsHeader.css("top",(n>0?n:0)+"px");this.$eventDetailsFilterContainer.css("top",(n>0?n:0)+"px");this.$eventDetailsFilterList.css("top",(n>0?n:0)+"px")},onModelChange:function(){var r=_.keys(this.model.changed),t,n,i;if(this.model.hasChanged("Favorite")&&(this.model.get("Favorite")?jQuery(this.$el).find(".toolbar-button.button-star").addClass("favorite"):jQuery(this.$el).find(".toolbar-button.button-star").removeClass("favorite")),!_.isEqual(jQuery.map(this.model.get("BetOffers"),function(n){return n.BetOfferId}),jQuery.map(this.model.previous("BetOffers"),function(n){return n.BetOfferId})))for(this._renderBetOffers(),t=this.betOfferToggles,this._renderBetOfferToggles(),n=0;n<t.length;n++)(i=this.$(".bet-offer-toggle[data-toggle-type="+t[n]+"]"),i.length!=0)&&this.toggleBetOffer({target:i});this.model.hasChanged("InMultiview")&&this.onMultiviewStatusChange();r.length>0&&!(r.length===1&&this.model.hasChanged("BetOffers"))&&this._renderHeader();this.$el[this.model.isValidEvent()?"removeClass":"addClass"]("hidden")},_renderHeader:function(){var t,i,n;this.$(".header-result").html(JST["LiveBetting/gui/templates/event-details/result/"+this.model.getSportLabelKey()+".hbs"](this.model.toJSON()));this.$(".header-result .team1-name").text().length!=this.model.get("Team1Name").length&&(this.$(".header-result .team1-name").attr("title",this.model.get("Team1Name")),this.$(".header-result .team1-name").tooltip());this.$(".header-result .team2-name").text().length!=this.model.get("Team2Name").length&&(this.$(".header-result .team2-name").attr("title",this.model.get("Team2Name")),this.$(".header-result .team2-name").tooltip());this.$(".header-result .player1-name").attr("title",this.model.get("Team1Name"));this.$(".header-result .player1-name").tooltip();this.$(".header-result .player2-name").attr("title",this.model.get("Team2Name"));this.$(".header-result .player2-name").tooltip();this.model.get("Server")=="1"?this.$(".player1-name").addClass("player-with-serve"):this.model.get("Server")=="2"&&this.$(".player2-name").addClass("player-with-serve");t=this.model.get("Status").substr(-2);t==="IT"?(this.$(".player2-name").addClass("player-with-serve"),this.$(".balls-strikes-outs").addClass("away")):t==="IB"&&(this.$(".player1-name").addClass("player-with-serve"),this.$(".balls-strikes-outs").removeClass("away"));i=this.model.get("Bases");i&&(n=i.split(","),n.length===3&&(this.$(".baseball-bases .base1").toggleClass("active",!!+n[0]),this.$(".baseball-bases .base2").toggleClass("active",!!+n[1]),this.$(".baseball-bases .base3").toggleClass("active",!!+n[2])));this.$el[this.model.get("IsReallyActive")?"removeClass":"addClass"]("disabled");this.model.hasVideoStream()?this.$(".button-video").show().css("display","inline-block"):this.$(".button-video").hide();PSK.Utils.renderCards(this.model,this.$(".home-card-container .event-cards-container .event-header-card-collection"),this.$(".away-card-container .event-cards-container .event-header-card-collection"))},_renderBetOfferToggles:function(){this.betOfferToggles=[];var n=document.createDocumentFragment(),t=this.model.betOffers.groupBy(function(n){return n.get("BetType")});jQuery.each(t,function(t,i){var r=document.createElement("div");r.className="bet-offer-toggle toggle-off";r.setAttribute("data-toggle-type",i[0].get("BetTypeId"));r.innerHTML=t;n.appendChild(r)});this.$(".event-details-bet-offer-toggles").html(n)},_renderBetOffers:function(){var n,i=document.createDocumentFragment(),t,r;this._cleanupBetOffers();this.model.betOffers.each(function(t){n=new PSK.Views.EventDetailsBetOffer({model:t,betEvent:this.model});i.appendChild(n.render().el);this.betOfferViews.push(n)},this);t=this.$(".event-details__bet-offers");this.model.hasBetOffersEmpty()?(r=this.model.getBetOffersEmptyReason(),t.append('<div class="bet-empty">'+r.translation+"<\/div>")):t.append(i);this.$(".event-details__header").addClass("bg-pattern-"+this.model.getSportLabelKey())},_addBetOffer:function(n){var t=n.data("toggle-type");this.betOfferToggles.push(t);n.addClass("toggle-on").removeClass("toggle-off");this.betOfferToggles.length===1&&this.$resetButton.removeClass("off").addClass("on")},_removeBetOffer:function(n){var t=n.data("toggle-type");this.betOfferToggles.splice(this.betOfferToggles.indexOf(t),1);n.removeClass("toggle-on").addClass("toggle-off");this.betOfferToggles.length||this.$resetButton.removeClass("on").addClass("off")},toggleBetOffer:function(n){var t=$(n.target);this.$eventDetailsFilterContainer.css("top").replace("px","")>0&&$(window).animate({scrollTop:0},{duration:450,easing:"linear"});t.hasClass("toggle-on")?this._removeBetOffer(t):this._addBetOffer(t);this.updateBetOfferVisibility()},updateBetOfferVisibility:function(){var n,r,i,t,u,e=this,f;if(this.betOfferToggles.length===0)this.$(".bet-offer").show();else for(this.$(".bet-offer").hide(),f=function(n){return jQuery.map(e.model.betOffers.models.filter(function(t){return t.get("BetTypeId").trim()==n}),function(n){return n.get("BetOfferId")})},n=0;n<this.betOfferToggles.length;n++)for(r=this.betOfferToggles[n],i=f(r),t=0;t<i.length;t++)u=this.$(".bet-offer-"+i[t]),u.show()},onHeaderToolbarButtonCloseClick:function(){this.trigger("close",this.model)},onHeaderToolbarButtonFavoriteClick:function(){this.model.set("Favorite",!this.model.get("Favorite"));var n=this.model.get("Favorite")?"favorite":"";this.$(".button-star").removeClass("favorite").addClass(n)},onHeaderAddToMultiviewClick:function(){var n=this.model.get("InMultiview")===undefined?!1:this.model.get("InMultiview");this.model.set("InMultiview",!n);this.trigger("multiview:add",this.model);this.$(".button-add-to-multiview").toggleClass("active",!n)},onMultiviewStatusChange:function(n,t){t?this.$(".button-add-to-multiview").addClass("active"):this.$(".button-add-to-multiview").removeClass("active")},onToggleOfferFilterClick:function(){var n=this;this.$betOfferTogglesContainer.slideToggle({done:function(){n.$betFilterSwith.hasClass("off")?n.$betFilterSwith.removeClass("off"):(n.$eventDetailsFilterContainer.removeClass("no-border"),n.$betFilterSwith.addClass("off"));PSK.Bus.liveEvent.trigger("detailsFilter")},start:function(){n.$eventDetailsFilterContainer.hasClass("no-border")||n.$eventDetailsFilterContainer.addClass("no-border")}})},onFilterResetClick:function(){var n=this;this.$betOfferTogglesContainer.find(".toggle-on").each(function(){n._removeBetOffer($(this))});this.updateBetOfferVisibility()},onHeaderVideoStartClick:function(){PSKweb.VideoStreamController.playVideo(this.model)},onHeaderToolbarButtonStatisticClick:function(){PSK.Bus.statistic.trigger("open",this.model.get("Id"))},remove:function(){this._cleanupBetOffers();Backbone.View.prototype.remove.call(this)},_cleanupBetOffers:function(){_.each(this.betOfferViews,function(n){n.remove()});this.$(".event-details__bet-offers").empty();this.betOfferViews=[]}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.LiveMain=Backbone.View.extend({template:JST["LiveBetting/gui/templates/live/main.hbs"],className:"main live-main",events:{"click .event-details-dialog-container":"onDialogContainerClick"},spinnerOptions:{lines:11,length:7,width:5,radius:10,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"200px",left:"50%"},EventDialogContainerMinPadding:0,initialize:function(n){this.bets=n.bets;this.favoriteBets=n.favoriteBets;this.unselectedBets=n.unselectedBets;this.videoStreamFilter=!1;this.spinner=new Spinner(this.spinnerOptions);this.sportsGroupList=new PSK.Views.SportGroupList({sports:n.unselectedSports});this.favoritesSportsGroupList=new PSK.Views.SportGroupList({sports:n.favoritesSports});this.listenTo(this.bets,"add remove change",this.updateNoEventsMessage,this);this.listenTo(this.favoriteBets,"add remove change",this.updateFavoriteEventsVisibility,this);this.listenTo(this.unselectedBets,"add remove change",this.updateUnselectedEventsVisibility,this);this.listenTo(PSK.Bus.liveEvent,"details",this.showEventItemDetails,this);this.listenTo(PSK.Bus.liveEvent,"detailsFilter",this.detailsFilterToggled,this);this.listenTo(Backbone,"video:filter",this.toggleVideoStreamFilter,this);this.listenTo(PSK.Bus.window,"scroll",this.onWindowScroll,this);this.listenToOnce(PSK.Bus.liveEvent,"liveEventsLoaded",this.updateNoEventsMessage,this)},render:function(){return this.$el.html(this.template()),this.$(".other-tables .psk-events").html(this.sportsGroupList.render().el),this.$(".favourite-tables .psk-events").html(this.favoritesSportsGroupList.render().el),this.spinner.spin(),this.$el.append(this.spinner.el),this.$favoriteEvents=this.$(".favourite-tables"),this.$unselectedEvents=this.$(".other-tables"),this.$eventDetailsDialogContainer=this.$(".event-details-dialog-container"),this.$eventDetailsDialog=this.$(".event-details-dialog"),this.updateFavoriteEventsVisibility(),this.updateUnselectedEventsVisibility(),this},toggleVideoStreamFilter:function(){return this.videoStreamFilter=!this.videoStreamFilter,this.sportsGroupList.toggleVideoStreamFilter(this.videoStreamFilter),this.favoritesSportsGroupList.toggleVideoStreamFilter(this.videoStreamFilter),this.videoStreamFilter},updateFavoriteEventsVisibility:function(){this.$favoriteEvents&&(this.favoriteBets.length>0?this.$favoriteEvents.show():this.$favoriteEvents.hide())},updateUnselectedEventsVisibility:function(){this.$unselectedBets&&(this.unselectedBets.length>0?this.$unselectedEvents.show():this.$unselectedEvents.hide())},updateNoEventsMessage:function(){var r,e,f,o,n,t,u,i;if(PSK.Utils.fixContentContainerSize(),r=jQuery("#live-message"),r.html(""),r.addClass("hidden"),e=this.bets.models.filter(function(n){return n.get("IsAnnouncement")}),e.length===this.bets.length){for(f=new Date(3e3,0,1),o=new Date,n=null,i=0;i<this.bets.length;i++)(t=(this.bets.models[i].get("StartDate")+" "+this.bets.models[i].get("StartTime")).match(/[0-9]+/g),u=new Date(t[2],t[1]-1,t[0],t[3],t[4]),u<o)||u<f&&(f=u,n=this.bets.models[i]);n!=null&&(r.removeClass("hidden"),r.html('<div class="header">'+PSKweb.Translations.nextEventStartsMessage+n.get("StartTime")+'<\/div><div class="mainRow"><div class="sport-icon sport-icon-'+PSKweb.Utils.getDefaultSportName(n.get("SportId"))+'"><\/div><span class="event"> '+n.get("Name")+'<\/span><span class="contest">'+n.get("ContestName")+"<\/span><\/div>"))}this.spinner.el&&this.spinner.stop()},detailsFilterToggled:function(){},showEventItemDetails:function(n){this.eventDetailsView&&(this.eventDetailsView.remove(),this.stopListening(this.eventDetailsView));this.eventDetailsView=new PSK.Views.EventDetails({model:n});this.listenTo(this.eventDetailsView,"close",function(){PSK.Bus.liveEvent.trigger("event-details-dialog:close");this.$eventDetailsDialogContainer.addClass("hidden");this.$eventDetailsDialog.html("");this.$el.css("min-height","auto");this.detailsDialogOpened=!1;this.currentDialogPadding=0},this);this.$eventDetailsDialogContainer.removeClass("hidden");this.$eventDetailsDialog.html(this.eventDetailsView.render().el);this.listenTo(this.eventDetailsView,"multiview:add",function(n){this.trigger("multiview:add",n)},this);this.$el.css("min-height",Math.max(jQuery(".content-container").height(),this.eventDetailsView.$el.height())+"px");this.detailsDialogOpened=!0;PSK.Bus.liveEvent.trigger("event-details-dialog:open");var t=this;setTimeout(function(){t.onWindowScroll();t.eventDetailsView.updateHeaderPosition()},10)},onDialogContainerClick:function(n){n.currentTarget===n.target&&this.eventDetailsView&&this.eventDetailsView.trigger("close")},onWindowScroll:function(){if(this.detailsDialogOpened&&this.eventDetailsView){var t=this.$eventDetailsDialogContainer[0].getBoundingClientRect(),n=-t.top;n>0?n+this.$eventDetailsDialog.height()<this.$eventDetailsDialogContainer.height()?this.$eventDetailsDialog.css("top",n):this.$eventDetailsDialog.css("top",this.$eventDetailsDialogContainer.height()-this.$eventDetailsDialog.height()):this.$eventDetailsDialog.css("top",0)}}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.MultiviewList=PSK.Views.AbstractList.extend({singleItem:PSK.Views.EventDetails,className:"",itemViewEl:'<li class="psk-event-details"><\/li>'})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.MultiviewAddToViewListItem=Backbone.View.extend({template:JST["LiveBetting/gui/templates/multiview/addToViewListItem.hbs"],tagName:"div",className:"item",initialize:function(n){this.selectedItems=n.data;this.model=n.model;this.listenTo(this.model,"change",function(){this.render()});this.listenTo(this.selectedItems,"reset",function(){this.render()})},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("Team1Name")&&this.model.get("Team2Name")&&this.model.get("Team1Name").length+this.model.get("Team2Name").length>24?(this.$el.find(".addToMvTeam1").text(this.model.get("Team1Name").substring(0,12)),this.$el.find(".addToMvTeam2").text(this.model.get("Team2Name").substring(0,11)),this.$el.find(".item-title").attr("title",this.model.get("Team1Name")+"-"+this.model.get("Team2Name")),this.$el.find(".item-title").tooltip()):(this.$el.find(".addToMvTeam1").text(this.model.get("Team1Name")),this.$el.find(".addToMvTeam2").text(this.model.get("Team2Name"))),this.selectedItems.indexOf(this.model)>-1&&this.$el.hide(),this.$el[this.model.isValidEvent()?"removeClass":"addClass"]("hidden"),this.model.get("Checked")?this.$el.addClass("active"):this.$el.removeClass("active"),this},events:{"click .item-game":"onItemClick"},onItemClick:function(){this.model.set("Checked",!this.model.get("Checked"));$(this.el).trigger("addToMvItemSelected",[this.model])}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.MultiviewAddToViewList=PSK.Views.AbstractList.extend({singleItem:PSK.Views.MultiviewAddToViewListItem,className:"psk-add-event-list",events:{}})}();PSK.Views=PSK.Views||{};PSK.Utils=PSK.Utils||{},function(){"use strict";PSK.Views.MultiviewAddToViewGroup=Backbone.View.extend({template:JST["LiveBetting/gui/templates/multiview/addToViewGroup.hbs"],initialize:function(n){this.group=n.group;this.selectedItems=n.selectedItems;this.listenTo(this.group.events,"reset",this.onGroupChange,this);this.listenTo(this.group.events,"add",this.onGroupChange,this);this.listenTo(this.group.events,"remove",this.onGroupChange,this)},render:function(){return this.$el.html(this.template()),this._renderHeader(),this._renderEvents(),this.$el[this.group.events.some(function(n){return n.isValidEvent()})?"removeClass":"addClass"]("hidden"),this.onGroupChange(),this},onGroupChange:function(){this.group.events.hasUnselectedEvents(this.selectedItems)?(this.$el.removeClass("hidden"),$(".add-game").show()):this.$el.addClass("hidden")},_renderHeader:function(){this.$(".item-header>.groupName").text(this.group.get("SportName").toUpperCase());this.$(".item-header>.sport-icon").addClass("sport-icon-"+PSKweb.Utils.getDefaultSportName(this.group.get("SportId")))},_renderEvents:function(){var n,t=document.createDocumentFragment();n=new PSK.Views.MultiviewAddToViewList({collection:this.group.events,itemViewData:this.selectedItems});n.render();n.collection.trigger("reset");t.appendChild(n.el);this.$(".sport").append(t)}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.MultiviewAddToViewDialog=Backbone.View.extend({template:JST["LiveBetting/gui/templates/multiview/modalDialog.hbs"],className:"psk-add-event-list",events:{addToMvItemSelected:"onItemSelected","click #btnAddToMultiView":"onSelectionFinished"},initialize:function(n){var t;if(this._selectedItems=new PSK.Collections.Event,n&&n.preselectedevents&&n.preselectedevents.length)for(t=0;t<n.preselectedevents.length;t++)this._selectedItems.add(n.preselectedevents[t]);this.groupCollection=n.groupCollection;this.betCollection=n.betCollection;this.listenTo(this.groupCollection,"reset",this.render);this.listenTo(this.betCollection,"reset",this.render);this.listenTo(this._selectedItems,"add",this._renderHeader);this.listenTo(this._selectedItems,"remove",this._renderHeader);this.listenTo(this._selectedItems,"reset",this._renderHeader)},render:function(){return this.$el.html(this.template()),this.currentlySelectedEvents=[],this._renderHeader(),this._renderGroups(),this._renderFooter(),this},_renderHeader:function(){var n=PSKweb.Translations.multiviewAddEvent;this.groupCollection.hasUnselectedEvents(this._selectedItems)&&this.$el.find(".adder-header .title").html(n)},_renderFooter:function(){var n=PSKweb.Translations.multiviewAddEvents;this.$el.find(".add-games").html(n);this.$(".item.active").length||this.$el.find(".add-games").hide()},_renderGroups:function(){var t=this,n=document.createDocumentFragment();this.groupCollection.each(function(i){t._renderGroup(i,n)});this.$el.find(".adder-body").empty().append(n)},_renderGroup:function(n,t){var i=new PSK.Views.MultiviewAddToViewGroup({group:n,selectedItems:this._selectedItems});i.render();t.appendChild(i.el)},onItemSelected:function(n,t){this.currentlySelectedEvents.indexOf(t)>-1?this.currentlySelectedEvents.pop(t):this.currentlySelectedEvents.push(t);this.$(".item.active").length?(this.$el.find(".add-games").show(),this.trigger("button:show")):(this.$el.find(".add-games").hide(),this.trigger("button:hide"))},onSelectionFinished:function(n){var t=this;this.currentlySelectedEvents.forEach(function(n){n.set("Checked",!1);t._selectedItems.add(n)});this.trigger("add:events",this._selectedItems,n)},cleanup:function(){}})}();PSK.Views=PSK.Views||{},function(){"use strict";var n=200,t=40;PSK.Views.MultiviewMain=Backbone.View.extend({template:JST["LiveBetting/gui/templates/multiview/main.hbs"],className:"multiview",events:{"click .multiview-arrow":"onArrowClick","click .arrow-container .button-close":"onArrowsClose"},ArrowsDefaultTopPosition:400,includeChild:function(n){this.modalChild=n;n.on("add:events",this.onAddEvents,this)},initialize:function(n){var t=this;this.groupCollection=n.groupCollection;this.betCollection=n.betCollection;this.selectedEvents=n.multiviewSelectedCollection;this.listenTo(this.selectedEvents,"reset",this.onSelectedEventsReset);this.listenTo(this.selectedEvents,"prereset",this.onSelectedEventsPrereset);this.listenTo(this.betCollection,"add remove",this._positionButton,this);this.checkForStoredEvents();this.listenTo(this.betCollection,"reset",this.checkForStoredEvents);this.listenTo(PSK.Bus.window,"keyup",this.onKeyUp,this);this.listenTo(PSK.Bus.window,"keydown",this.onKeyDown,this);this.listenTo(PSK.Bus.window,"scroll",this._onScroll,this);this.listenTo(PSK.Bus.window,"resize",this._onResize,this);this.$el.on("scroll",function(){t._positionButton();PSK.Bus.window.trigger("multiview-scroll")})},checkForStoredEvents:function(){var n=this.getEventsFromStorage();n&&n.length>0&&n.map(function(n){var t=this.betCollection.models.filter(function(t){return t.get("Id")==n});t[0]&&(this.selectedEvents.add(t[0]),t[0].set("InMultiview",!0))},this);this.render()},getEventsFromStorage:function(){return JSON.parse(window.localStorage.getItem("multiviewEvents"))},onSelectedEventsPrereset:function(){this.multiviewItemsOrder=jQuery.map(this.$el.find(".psk-event-details"),function(n){return n.getAttribute("eventId")})},onSelectedEventsReset:function(){var n,t;for(this.render(),n=this.multiviewItemsOrder.length-1;n>=0;n--)(t=this.$el.find('.psk-event-details[eventId="'+this.multiviewItemsOrder[n]+'"]'),t.length!=0)&&jQuery(".multiview-event-list-container ul").prepend(t)},render:function(){if(this.$eventListScrollable&&this.$eventListScrollable.off(),this.$arrowWrap&&this.$arrowWrap.off(),this.$el.html(this.template()),this.$pskMainLayout=this.$pskMainLayout||$(".content"),this.pskMainLayoutEl=this.pskMainLayoutEl||this.$pskMainLayout[0],this.$arrowWrap=this.$(".multiview-arrow-wrap"),this.$arrowWrapLeft=this.$arrowWrap.filter(".multiview-arrow-wrap-left"),this.$arrowWrapRight=this.$arrowWrap.filter(".multiview-arrow-wrap-right"),this.$eventListScrollable=this.$(".multiview-event-list-scrollable"),this.$eventListContainer=this.$(".multiview-event-list-container"),this.$addGame=this.$(".add-game"),this.renderEvents(),this._renderGameAdder(),this.$eventListScrollable.perfectScrollbar({suppressScrollY:!0}),this.$eventListScrollable.addClass("is-fixed"),this.$arrowWrap.mouseenter(_.bind(this.onArrowMouseEnter,this)),this.$arrowWrap.mouseleave(_.bind(this.onArrowMouseLeave,this)),JSON.parse(localStorage.getItem("hideHelpers"))||this.$(".arrow-container").show(),this.scrollingIsPossible)this.$eventListScrollable.on("scroll",_.bind(this.onEventListScroll,this));return this.lastTimeKeyPressed=0,this},_renderGameAdder:function(){var n=new PSK.Views.MultiviewAddToViewDialog({groupCollection:this.groupCollection,betCollection:this.betCollection,preselectedevents:this.selectedEvents.models});n.render();this.$addGame.empty().append(n.el);this._positionButton();n.on("add:events",this.onAddEvents,this);this.listenTo(n,"button:show button:hide",this._positionButton,this);this.$addGame.show();this.$(".adder-header").find(".title").html()||this.$addGame.hide()},_onResize:function(){this._positionButton();this._updateScrollbarSize()},_updateScrollbarSize:function(){this.$eventListScrollable.perfectScrollbar("update")},_positionScrollbar:function(){var n=$(window),t=n.scrollTop()+n.height(),i=this.$eventListScrollable.height()+this.$eventListScrollable.offset().top;t>=i?this.$eventListScrollable.removeClass("is-fixed"):this.$eventListScrollable.addClass("is-fixed")},_positionButton:function(){var n=this.$(".add-game")[0].getBoundingClientRect().bottom-window.innerHeight;n>0&&this.$(".add-games:visible").length?(this.$addGame.addClass("fix-button-position"),this.$(".adder-footer").css("bottom",n+"px")):this.$addGame.removeClass("fix-button-position")},_onScroll:function(){this._positionButton();this._positionScrollbar()},resizeEventsContainer:function(){this.$(".multiview-event-list-container").css({width:(this.selectedEvents.length+2)*300+(this.selectedEvents.length+1)*4+"px"})},renderEvents:function(){var t=this,n=document.createDocumentFragment();this.multiviewList=new PSK.Views.MultiviewList({collection:this.selectedEvents,el:"<ul><\/ul>"});n.appendChild(this.multiviewList.render().el);this.listenTo(this.multiviewList,"close:item",function(n){t.onCloseSingleEvent(n);t._renderGameAdder()});this.resizeEventsContainer();jQuery(n.firstChild).sortable({handle:".toolbar-button.button-drag"}).bind("sortupdate",function(){var n=jQuery.map(jQuery(".psk-event-details"),function(n){return parseInt(n.getAttribute("eventId"),10)});window.localStorage.setItem("multiviewEvents",JSON.stringify(n))});this.$(".multiview-event-list-container .adder-container").before(n)},updateArrows:function(){this.updateArrowHorizontalPosition();this.updateArrowVerticalPosition();this.updateArrowVisibility()},updateArrowHorizontalPosition:function(){},updateArrowVerticalPosition:function(){},updateArrowVisibility:function(){},getEventContainerElementsInnerWidthSum:function(){var n=this.multiviewList.items[0].$el.innerWidth(),t=this.$(".add-game").innerWidth();return this.selectedEvents.length*n+t},getLeftArrowDefaultPosition:function(){return 0},getRightArrowDefaultPosition:function(){},filterHidden:function(n){var t=[];return n.forEach(function(n){n.isValidEvent()&&t.push(n)}),t},onAddEvents:function(n){var t,i;$(this.selectedEvents.models).each(function(n,t){t.set("InMultiview",!1)});$(n.models).each(function(n,t){t.set("InMultiview",!0)});t=this.filterHidden(n.models);this.selectedEvents.reset(t);this.$("#modal-live").modal("hide");$("body").removeClass("modal-open");$(".modal-backdrop").remove();i=this.selectedEvents.pluck("Id");window.localStorage.setItem("multiviewEvents",JSON.stringify(i))},onShowModal:function(){this.modalView&&(this.modalView.cleanup(),this.modalView.remove());this._renderModal();this.modalChild._selectedItems.reset(this.selectedEvents.models);this.$("#multiviewModalPlaceholder #modal-live").modal("show");$("body").css("padding-right","")},onCloseSingleEvent:function(n){var i=this.$(".multiview-event-list-scrollable")[0].scrollLeft,t;n.set("InMultiview",!1);this.selectedEvents.remove(n);this.$(".multiview-event-list-scrollable")[0].scrollLeft=i;this.resizeEventsContainer();t=this.selectedEvents.pluck("Id");window.localStorage.setItem("multiviewEvents",JSON.stringify(t))},onKeyUp:function(n){if(n.keyCode===37||n.keyCode===39)return n.preventDefault(),!1},onKeyDown:function(t){if(t.keyCode===37||t.keyCode===39){var i=(new Date).getTime();return i-this.lastTimeKeyPressed<n?(t.preventDefault(),!1):(this.lastTimeKeyPressed=i,t.keyCode===37?this.scrollToEl(-1):t.keyCode===39&&this.scrollToEl(1),t.preventDefault(),!1)}},onArrowMouseEnter:function(n){var t=$(n.target),i=t.is(".multiview-arrow")?t.parent():t,r=i.hasClass("multiview-arrow-wrap-left");r?this.mouseLeaveTimer&&this.mouseLeaveTimer.left&&clearTimeout(this.mouseLeaveTimer.left):this.mouseLeaveTimer&&this.mouseLeaveTimer.right&&clearTimeout(this.mouseLeaveTimer.right);i.find(".multiview-arrow").animate({width:"60px"},150)},onArrowMouseLeave:function(n){var t=$(n.target),i=t.is(".multiview-arrow")?t.parent():t,r=setTimeout(function(){i.find(".multiview-arrow").animate({width:"10px"},150)},500),u;this.mouseLeaveTimer=this.mouseLeaveTimer||{};u=i.hasClass("multiview-arrow-wrap-left");u?this.mouseLeaveTimer.left=r:this.mouseLeaveTimer.right=r},onArrowClick:function(n){var t=$(n.target),i=t.hasClass("multiview-arrow-left");this.scrollToEl(i?-1:1)},onArrowsClose:function(){this.$(".arrow-container").hide();localStorage.setItem("hideHelpers",!0)},scrollToEl:function(i){var r=this.$(".psk-event-details").width()+10;this.$eventListScrollable.scrollTo({top:this.$eventListScrollable.scrollTop(),left:(parseInt(this.$eventListScrollable.scrollLeft()/r,10)+i)*r+t+"px"},n)},onEventListScroll:function(){var n=this.$eventListScrollable.scrollLeft(),t=this.getEventContainerElementsInnerWidthSum()-this.$pskMainLayout.innerWidth()+40;n>0?(this.arrowWrapLeftHidden&&(this.$arrowWrapLeft.find(".multiview-arrow").width(10),this.$arrowWrapLeft.show(),this.arrowWrapLeftHidden=!1),n>=t?this.arrowWrapRightHidden||(this.$arrowWrapRight.hide(),this.arrowWrapRightHidden=!0):this.arrowWrapRightHidden&&(this.$arrowWrapRight.find(".multiview-arrow").width(10),this.$arrowWrapRight.show(),this.arrowWrapRightHidden=!1)):this.arrowWrapLeftHidden||(this.$arrowWrapLeft.hide(),this.arrowWrapLeftHidden=!0)}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.Day=Backbone.View.extend({template:JST["LiveBetting/gui/templates/calendar/day.hbs"],tagName:"div",id:"",className:"",events:{},initialize:function(n){var t;for(this.dayData=n.dayData,this.hourViews=[],t=0;t<24;t++)this.hourViews.push(new PSK.Views.Hour({eventsCollection:this.dayData[t]}));PSK.Bus.liveEvent.on("change:StartTime",_.bind(this.render,this));PSK.Bus.liveEvent.on("changeHourGroup",this.changeEventHourGroup,this)},changeEventHourGroup:function(){for(var i,r,t,n=0;n<=23;n++)for(i=this.dayData[n].models.length-1;i>=0;i--)r=this.dayData[n].models[i],t=parseInt(r.get("StartTime").split(":")[0],10),t=t<24?t>=0?t:0:23,t!=n&&(this.dayData[n].remove(r),this.dayData[t].add(r))},render:function(){for(var t,n=1;n<=7;n++)for(t=0;t<=23;t++)PSK.calendarGrouper.calGroups[n][t].sort();return this.$el.html(this.template({day:this.dayData.day})),_.forEach(this.hourViews,function(n){this.$(".day-container").append(n.render().el)},this),$(".day.active").length==1&&PSK.Bus.liveEvent.trigger("changeCalendarDay",$(".day.active").data("day"),this),this}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.CalEvent=Backbone.View.extend({template:JST["LiveBetting/gui/templates/calendar/event.hbs"],tagName:"div",className:"",events:{"click .calendar-item-statistic":"onStatisticClick","click .calendar-item-video":"onVideoStartClick"},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("IsAnnouncement")?(this.$(".calendar-item-video").attr("src","/Content/images/icon_live_prijenos.png"),this.$(".calendar-item-video").addClass("disabled")):this.$(".calendar-item-video").attr("src","/Content/images/live_prijenos.png"),this.model.hasVideoStream()?this.$(".calendar-item-video").show():this.$(".calendar-item-video").hide(),this},onStatisticClick:function(){PSK.Bus.statistic.trigger("open",this.model.get("Id"))},onVideoStartClick:function(){this.$(".calendar-item-video").hasClass("disabled")||PSKweb.VideoStreamController.playVideo(this.model)}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.Hour=Backbone.View.extend({template:JST["LiveBetting/gui/templates/calendar/hour.hbs"],tagName:"div",id:"",className:"",events:{},initialize:function(n){this.eventsCollection=n.eventsCollection;this.eventListView=new PSK.Views.CalendarList({collection:this.eventsCollection,showAnnouncements:!0});this.listenTo(this.eventsCollection,"remove reset",_.bind(this.checkShowStatus,this));this.listenTo(this.eventsCollection,"add",_.bind(this.render,this))},render:function(){return this.$el.html(this.template({hour:this.eventsCollection.hour})),this.$(".event-list").html(this.eventListView.render().el),this.$hourContainer=this.$(".hour-container"),this.checkShowStatus(),this},checkShowStatus:function(){this.$hourContainer&&(this.eventsCollection.length===0?this.$hourContainer.hide():this.$hourContainer.show())}})}();PSK.Views=PSK.Views||{},function(){"use strict";PSK.Views.CalendarList=PSK.Views.AbstractList.extend({singleItem:PSK.Views.CalEvent,className:"",events:{}})}();PSK.Views=PSK.Views||{},function(){"use strict";var n={"1":PSKweb.Translations.monday,"2":PSKweb.Translations.tuesday,"3":PSKweb.Translations.wednesday,"4":PSKweb.Translations.thursday,"5":PSKweb.Translations.friday,"6":PSKweb.Translations.saturday,"7":PSKweb.Translations.sunday};PSK.Views.CalendarMain=Backbone.View.extend({template:JST["LiveBetting/gui/templates/calendar/main.hbs"],tagName:"div",className:"",events:{"click .day":"onDayChangeClick"},initialize:function(t){this.days=t.days;this.currentDay=new Date;this.currentDayIndex=(this.currentDay.getDay()+6)%7;this.dayViews=[];this.dayNames={};this.currentDate=PSKweb.Globalize.formatDate(this.currentDay,{raw:"dd. MM."});for(var r,i=0;i<7;i++)r=this.days[(this.currentDayIndex+i)%7+1],this.dayNames["Day"+(i+1)]={Name:n[r.day],Index:r.day},this.dayViews.push(new PSK.Views.Day({dayData:r}));this.listenTo(PSK.Bus.liveEvent,"changeCalendarDay",this.onDayChange,this)},render:function(){return this.$el.html(this.template(this.dayNames)),_.forEach(this.dayViews,function(n){this.$(".calendar-body").append(n.render().el)},this),this.$(".day-container").hide(),this.$(".day-container").first().show(),this.$(".today-date").text(this.currentDate),this},onDayCollectionReset:function(){this.$(".day")[0].click()},onDayChangeClick:function(n){var t=$(n.target).data("day");this.onDayChange(t)},onDayChange:function(n){var t=new Date,i=(n-this.currentDayIndex+7-1)%7;t.setDate(t.getDate()+i);this.$(".today-date").text(PSKweb.Globalize.formatDate(t,{raw:"dd. MM."}));$(".day").removeClass("active");$("span[data-day='"+n+"'].day").addClass("active");$(".day-container").hide();$("#"+n+".day-container").show()}})}();PSK.Routers=PSK.Routers||{},function(){"use strict";var i={LIVE:0,MULTIVIEW:1,CALENDAR:2,MULTIVIEWMODAL:3},n=new PSK.Collections.Event,r=new PSK.Collections.Event,u=new PSK.Collections.Event,f=new PSK.Collections.Sport,e=new PSK.Collections.Sport,o=new PSK.Collections.Sport,t=new PSK.Collections.UnsortedEvent,s={};PSK.Routers.Main=Backbone.Router.extend({routes:{"":"onDefaultRoute",live:"onDefaultRoute","live/:id":"onDefaultRoute",multiview:"onMultiviewRoute",multiviewModal:"onMultiviewModalRoute",calendar:"onCalendarRoute","*notFound":"onDefaultRoute"},views:[],_initStartingView:function(){if(!this.layout){var i=new PSK.Controller.Hub({collection:n,sports:f,unselectedSports:e,unselectedBets:u,favoriteBets:r,favoritesSports:o});PSK.eventGrouper=new PSK.Controller.EventGrouper({sports:f,collection:n,favoriteBets:r,unselectedBets:u});PSK.favoritesController=new PSK.Controller.FavoritesGrouper({sports:o,collection:r,allBetsCollection:n});PSK.unselectedController=new PSK.Controller.UnselectedGrouper({sports:e,collection:u});PSK.calendarGrouper=new PSK.Controller.CalendarGrouper({collection:n,calGroups:s});n.on("remove",function(n){t.remove(n)});this.layout=new PSK.Views.BetLayout;this.layout.render()}},toggleView:function(n){this.activeViewIndex=n||i.LIVE;this.layout.$(".tabbed-content").hide();this.views[n]&&this.views[n].$el.parent().show()},onDefaultRoute:function(f){var s=i.LIVE;if(this._initStartingView(),this.addActiveClass(0),!this.views[s]){this.views[s]=new PSK.Views.LiveMain({favoritesSports:o,unselectedSports:e,bets:n,favoriteBets:r,unselectedBets:u});this.views[s].on("multiview:add",function(n){var i=JSON.parse(window.localStorage.getItem("multiviewEvents")),r;i=_.isArray(i)?i:[];t.indexOf(n)!==-1||i.indexOf(n.get("Id"))!==-1?(t.remove(n),r=i.indexOf(n.get("Id")),r>-1&&i.splice(r,1)):(t.add(n),i.push(n.get("Id")));window.localStorage.setItem("multiviewEvents",JSON.stringify(i))},this);this.layout.$el.find(".live-view").html(this.views[s].render().el);this.$liveContainer=$(".live");PSK.Bus.liveEvent.on("change:Favorite",_.bind(this.onWindowResize,this));n.on("add remove reset",_.bind(this.onWindowResize,this));$(window).resize(_.bind(this.onWindowResize,this));$(window).on("bet:offer:size-change",_.bind(this.onWindowResize,this))}if(this.toggleView(s),f!=null)if(PSK.eventGrouper.collection.length==0)PSK.Bus.liveEvent.once("liveEventsLoaded",jQuery.proxy(function(){this.onDefaultRoute_DetailsView(f)},this));else this.onDefaultRoute_DetailsView(f);else this.views[s].eventDetailsView!=null&&this.views[s].eventDetailsView.trigger("close",this.views[s].eventDetailsView.model);this.navigate("live");this.onWindowResize()},onDefaultRoute_DetailsView:function(n){if(n!=null){var t=PSK.eventGrouper.collection.get(n);t!=null&&t.get("Active")&&t.get("IsReallyActive")?PSK.Bus.liveEvent.trigger("details",t):PSK.Routers.navigate("live")}},onMultiviewRoute:function(){var r=i.MULTIVIEW;this._initStartingView();this.addActiveClass(1);this.views[r]||(this.views[r]=new PSK.Views.MultiviewMain({groupCollection:f,betCollection:n,multiviewSelectedCollection:t}),this.layout.$(".multi-view").append(this.views[r].render().el));this.toggleView(r);PSK.Bus.window.trigger("multiview-scroll")},onCalendarRoute:function(){var n=i.CALENDAR;if(this._initStartingView(),this.addActiveClass(2),!this.views[n])if(this.views[n]=new PSK.Views.CalendarMain({days:s}),PSK.eventGrouper.collection.length==0)PSK.Bus.liveEvent.once("liveEventsLoaded",jQuery.proxy(function(){this.layout.$(".calendar").append(this.views[n].render().el);this.toggleView(n)},this));else this.layout.$(".calendar").append(this.views[n].render().el);this.toggleView(n)},onWindowResize:function(){},addActiveClass:function(n){$(".container-fluid.with-ticket").toggleClass("is-multiview",n===1);var t=$(".nav-context li");t.removeClass("active");$(t[n]).addClass("active")}})}();PSK.Bus=PSK.Bus||{},function(){"use strict";PSK.Bus.Base=function(){this.initialize.apply(this,arguments)};_.extend(PSK.Bus.Base.prototype,Backbone.Events,{initialize:function(){}})}();PSK.Bus=PSK.Bus||{},function(){"use strict";PSK.Bus.liveEvent=new PSK.Bus.Base}();PSK.Bus=PSK.Bus||{};PSKweb=PSKweb||{};PSKweb.Loading=PSKweb.Loading||{},function(){"use strict";PSK.Bus.statistic=new PSK.Bus.Base;PSK.Bus.statistic.init=function(){this.enabled=!1;var n=$("#psk-main-layout, #live-offer-box");PSK.IsBetradarStatisticEnabled?(this.setStatisticUrl(PSK.BetRadarStatisticsMatchPageUrl),this.enabled=!0,n.removeClass("no-statistic")):n.addClass("no-statistic")};PSK.Bus.statistic.setStatisticUrl=function(n){this.pageUrl=n||"http://www.stats.betradar.com/statistics/psk/?clientid=301&matchid={0}&treemenu=false"};PSK.Bus.statistic.on("open",function(n){if(this.enabled){n=parseInt(n,10);n=Math.abs(n);var t=this.pageUrl.replace("clientmatchid","matchid").replace("{0}",n);window.open(t,"Statistika","width=850,height=750,resizable=yes,scrollbars=yes")}})}();PSKweb.Loading.liveVideoToggle=function(){"use strict";$("#video-toggle").click(function(){Backbone.trigger("video:filter");$(this).hasClass("inactive")?($(this).removeClass("inactive"),$(this).addClass("active")):($(this).removeClass("active"),$(this).addClass("inactive"))})};PSK.Bus=PSK.Bus||{},function(){"use strict";PSK.Bus.ticket=new PSK.Bus.Base;setTimeout(function(){PSK.Bus.ticket.on("betslip:modified",function(){PSK.Utils.fixContentContainerSize()})},500)}();PSK.Bus=PSK.Bus||{},function(){"use strict";PSK.Bus.window=new PSK.Bus.Base;$(window).on("scroll",function(){PSK.Bus.window.trigger("scroll")});$(window).on("resize",function(){PSK.Bus.window.trigger("resize")});$(window).on("keyup",function(n){PSK.Bus.window.trigger("keyup",n)});$(window).on("keydown",function(n){PSK.Bus.window.trigger("keydown",n)})}();PSKweb=PSKweb||{};PSKweb.Loading=PSKweb.Loading||{};PSKweb.Loading.liveApp=function(){PSK.App=function(){var n={},t;return n.setBetSlipLocked=function(n){t=n},n.getBetSlipLocked=function(){return t},PSKweb.Betslip.Controller.init(),PSKweb.initPSK(),n}()}